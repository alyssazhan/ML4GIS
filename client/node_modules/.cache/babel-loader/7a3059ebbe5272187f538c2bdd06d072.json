{"ast":null,"code":"import _objectSpread from\"D:\\\\GitHub\\\\ML4GIS\\\\client\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import React from\"react\";import Paper from\"@material-ui/core/Paper\";import DefaultRegionLabel from\"../RegionLabel/main_RegionLabel\";import LockIcon from\"@material-ui/icons/Lock\";var copyWithout=function copyWithout(obj){var newObj=_objectSpread({},obj);for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key];}for(var _i=0,_args=args;_i<_args.length;_i++){var arg=_args[_i];delete newObj[arg];}return newObj;};export var RegionTags=function RegionTags(_ref){var regions=_ref.regions,projectRegionBox=_ref.projectRegionBox,mouseEvents=_ref.mouseEvents,regionTagList=_ref.regionTagList,onBeginRegionEdit=_ref.onBeginRegionEdit,onChangeRegion=_ref.onChangeRegion,onCloseRegionEdit=_ref.onCloseRegionEdit,onDeleteRegion=_ref.onDeleteRegion,layoutParams=_ref.layoutParams,imageSrc=_ref.imageSrc,RegionEditLabel=_ref.RegionEditLabel,onRegionClassAdded=_ref.onRegionClassAdded,allowComments=_ref.allowComments;var RegionLabel=RegionEditLabel!=null?RegionEditLabel:DefaultRegionLabel;return regions.filter(function(r){return r.visible||r.visible===undefined;}).map(function(region){var pbox=projectRegionBox(region);var _layoutParams$current=layoutParams.current,iw=_layoutParams$current.iw,ih=_layoutParams$current.ih;var margin=8;if(region.highlighted&&region.type===\"rectangle\")margin+=6;var labelBoxHeight=region.editingLabels&&!region.locked?170:region.tags?60:50;var displayOnTop=pbox.y>labelBoxHeight;var coords=displayOnTop?{left:pbox.x,top:pbox.y-margin/2}:{left:pbox.x,top:pbox.y+pbox.h+margin/2};if(region.locked){return/*#__PURE__*/React.createElement(\"div\",{key:region.id,style:_objectSpread(_objectSpread({position:\"absolute\"},coords),{},{zIndex:10+(region.editingLabels?5:0)})},/*#__PURE__*/React.createElement(Paper,{style:_objectSpread(_objectSpread({position:\"absolute\",left:0},displayOnTop?{bottom:0}:{top:0}),{},{zIndex:10,backgroundColor:\"#fff\",borderRadius:4,padding:2,paddingBottom:0,opacity:0.5,pointerEvents:\"none\"})},/*#__PURE__*/React.createElement(LockIcon,{style:{width:16,height:16,color:\"#333\"}})));}return/*#__PURE__*/React.createElement(\"div\",{key:region.id,style:_objectSpread(_objectSpread({position:\"absolute\"},coords),{},{zIndex:10+(region.editingLabels?5:0),width:200}),onMouseDown:function onMouseDown(e){return e.preventDefault();},onMouseUp:function onMouseUp(e){return e.preventDefault();},onMouseEnter:function onMouseEnter(e){if(region.editingLabels){mouseEvents.onMouseUp(e);e.button=1;mouseEvents.onMouseUp(e);}}},/*#__PURE__*/React.createElement(\"div\",Object.assign({style:_objectSpread({position:\"absolute\",zIndex:20,left:0},displayOnTop?{bottom:0}:{top:0})},!region.editingLabels?copyWithout(mouseEvents,\"onMouseDown\",\"onMouseUp\"):{}),/*#__PURE__*/React.createElement(RegionLabel,{allowedTags:regionTagList,onOpen:onBeginRegionEdit,onChange:onChangeRegion,onClose:onCloseRegionEdit,onDelete:onDeleteRegion,editing:region.editingLabels,region:region,regions:regions,imageSrc:imageSrc,onRegionClassAdded:onRegionClassAdded,allowComments:allowComments})));});};export default RegionTags;","map":{"version":3,"sources":["D:/GitHub/ML4GIS/client/src/pages/Home/annotateComponents/RegionTags/main_RegionTags.js"],"names":["React","Paper","DefaultRegionLabel","LockIcon","copyWithout","obj","newObj","args","arg","RegionTags","regions","projectRegionBox","mouseEvents","regionTagList","onBeginRegionEdit","onChangeRegion","onCloseRegionEdit","onDeleteRegion","layoutParams","imageSrc","RegionEditLabel","onRegionClassAdded","allowComments","RegionLabel","filter","r","visible","undefined","map","region","pbox","current","iw","ih","margin","highlighted","type","labelBoxHeight","editingLabels","locked","tags","displayOnTop","y","coords","left","x","top","h","id","position","zIndex","bottom","backgroundColor","borderRadius","padding","paddingBottom","opacity","pointerEvents","width","height","color","e","preventDefault","onMouseUp","button"],"mappings":"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","sourcesContent":["\r\nimport React from \"react\"\r\nimport Paper from \"@material-ui/core/Paper\"\r\nimport DefaultRegionLabel from \"../RegionLabel/main_RegionLabel\"\r\nimport LockIcon from \"@material-ui/icons/Lock\"\r\n\r\nconst copyWithout = (obj, ...args) => {\r\n  const newObj = { ...obj }\r\n  for (const arg of args) {\r\n    delete newObj[arg]\r\n  }\r\n  return newObj\r\n}\r\n\r\nexport const RegionTags = ({\r\n  regions,\r\n  projectRegionBox,\r\n  mouseEvents,\r\n  regionTagList,\r\n  onBeginRegionEdit,\r\n  onChangeRegion,\r\n  onCloseRegionEdit,\r\n  onDeleteRegion,\r\n  layoutParams,\r\n  imageSrc,\r\n  RegionEditLabel,\r\n  onRegionClassAdded,\r\n                               allowComments,\r\n}) => {\r\n  const RegionLabel =\r\n    RegionEditLabel != null ? RegionEditLabel : DefaultRegionLabel\r\n  return regions\r\n    .filter((r) => r.visible || r.visible === undefined)\r\n    .map((region) => {\r\n      const pbox = projectRegionBox(region)\r\n      const { iw, ih } = layoutParams.current\r\n      let margin = 8\r\n      if (region.highlighted && region.type === \"rectangle\") margin += 6\r\n      const labelBoxHeight =\r\n        region.editingLabels && !region.locked ? 170 : region.tags ? 60 : 50\r\n      const displayOnTop = pbox.y > labelBoxHeight\r\n\r\n      const coords = displayOnTop\r\n        ? {\r\n            left: pbox.x,\r\n            top: pbox.y - margin / 2,\r\n          }\r\n        : { left: pbox.x, top: pbox.y + pbox.h + margin / 2 }\r\n      if (region.locked) {\r\n        return (\r\n          <div\r\n            key={region.id}\r\n            style={{\r\n              position: \"absolute\",\r\n              ...coords,\r\n              zIndex: 10 + (region.editingLabels ? 5 : 0),\r\n            }}\r\n          >\r\n            <Paper\r\n              style={{\r\n                position: \"absolute\",\r\n                left: 0,\r\n                ...(displayOnTop ? { bottom: 0 } : { top: 0 }),\r\n                zIndex: 10,\r\n                backgroundColor: \"#fff\",\r\n                borderRadius: 4,\r\n                padding: 2,\r\n                paddingBottom: 0,\r\n                opacity: 0.5,\r\n                pointerEvents: \"none\",\r\n              }}\r\n            >\r\n              <LockIcon style={{ width: 16, height: 16, color: \"#333\" }} />\r\n            </Paper>\r\n          </div>\r\n        )\r\n      }\r\n      return (\r\n        <div\r\n          key={region.id}\r\n          style={{\r\n            position: \"absolute\",\r\n            ...coords,\r\n            zIndex: 10 + (region.editingLabels ? 5 : 0),\r\n            width: 200,\r\n          }}\r\n          onMouseDown={(e) => e.preventDefault()}\r\n          onMouseUp={(e) => e.preventDefault()}\r\n          onMouseEnter={(e) => {\r\n            if (region.editingLabels) {\r\n              mouseEvents.onMouseUp(e)\r\n              e.button = 1\r\n              mouseEvents.onMouseUp(e)\r\n            }\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              position: \"absolute\",\r\n              zIndex: 20,\r\n              left: 0,\r\n              ...(displayOnTop ? { bottom: 0 } : { top: 0 }),\r\n            }}\r\n            {...(!region.editingLabels\r\n              ? copyWithout(mouseEvents, \"onMouseDown\", \"onMouseUp\")\r\n              : {})}\r\n          >\r\n            <RegionLabel\r\n              allowedTags={regionTagList}\r\n              onOpen={onBeginRegionEdit}\r\n              onChange={onChangeRegion}\r\n              onClose={onCloseRegionEdit}\r\n              onDelete={onDeleteRegion}\r\n              editing={region.editingLabels}\r\n              region={region}\r\n              regions={regions}\r\n              imageSrc={imageSrc}\r\n              onRegionClassAdded={onRegionClassAdded}\r\n              allowComments={allowComments}\r\n            />\r\n          </div>\r\n        </div>\r\n      )\r\n    })\r\n}\r\n\r\nexport default RegionTags\r\n"]},"metadata":{},"sourceType":"module"}