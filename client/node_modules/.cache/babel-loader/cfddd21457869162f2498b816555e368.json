{"ast":null,"code":"var _jsxFileName = \"/Users/yan/Documents/GItHub/ML4GIS/client/src/pages/Home/SubmitHIT/main_SubmitHIT.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport AnnotationTool from \"../annotateComponents/main_Annotate\";\nimport Button from 'react-bootstrap/Button';\nvar env = process.env.NODE_ENV;\n\nvar config = require(\"../../../config.json\");\n\nexport default class SubmitHIT extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null,\n      isLoaded: false,\n      EnabledTools: null,\n      AllowComments: null,\n      Tags: null,\n      imgData: [{\n        src: \"https://geodata.lib.utexas.edu/assets/blac_featured_image_map-dca4cbca4e07010e5bd201ad8fab1cc0aa9abd24a8842f90e3c1eef1834e8498.jpg\",\n        name: \"Image 1\",\n        regions: []\n      }, {\n        src: \"https://geodata.lib.utexas.edu/assets/utlmaps_featured_image_map-c07ae2551145ff2e5f5fa3c71baa345d9d674a33b08f422449203cf9ed47e0d1.jpg\",\n        name: \"Image 2\",\n        regions: []\n      }, {\n        src: \"https://1igc0ojossa412h1e3ek8d1w-wpengine.netdna-ssl.com/wp-content/uploads/2018/03/TMSELEMWORLD.M.jpg\",\n        name: \"Image 3\",\n        regions: []\n      }]\n    };\n    this.props = props;\n    this.submitTask = this.submitTask.bind(this);\n    this.getSubmissionUrl = this.getSubmissionUrl.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.componentDidMount = this.componentDidMount(this);\n  }\n\n  getTools(res) {\n    console.log(\"get tool:\", res.Tools['enenabledTools']);\n  } //get data from api\n\n\n  componentDidMount() {\n    function getEnabledTools(data) {\n      const enabledTools = data[\"enabledTools\"];\n      var res = [];\n\n      for (var i = 0; i < enabledTools.length; i++) {\n        if (enabledTools[i][\"create point\"] == true) {\n          res.push(\"create-point\");\n        } else if (enabledTools[i][\"create rectangle\"] == true) {\n          res.push(\"create-rectangle\");\n        } else if (enabledTools[i][\"create polygon\"] == true) {\n          res.push(\"create-polygon\");\n        } else if (enabledTools[i][\"create polygon1\"] == true) {\n          res.push(\"create-polygon1\");\n        } else if (enabledTools[i][\"create ellipse\"] == true) {\n          res.push(\"create-circle\");\n        }\n      }\n\n      return res;\n    }\n\n    fetch(\"/api\", {\n      mode: 'cors'\n    }).then(res => res.json()).then(result => {\n      const enabledTools = getEnabledTools(result[\"setup\"]);\n      this.setState({\n        isLoaded: true,\n        EnabledTools: enabledTools,\n        AllowComments: result[\"setup\"][\"allow-comments\"],\n        Tags: result[\"setup\"][\"tags\"]\n      });\n      console.log(\"res is: \", result);\n    }, // Note: it's important to handle errors here\n    // instead of a catch() block so that we don't swallow\n    // exceptions from actual bugs in components.\n    error => {\n      this.setState({\n        isLoaded: true,\n        error\n      });\n    });\n  }\n\n  parseParameters(url) {\n    var params = {\n      'assignmentId': null,\n      'hitId': null,\n      'workerId': null,\n      'turkSubmitTo': null\n    };\n    var queryString = url.split('?')[1];\n\n    if (queryString) {\n      var queryPieces = queryString.split('&');\n\n      for (var i = 0; i < queryPieces.length; ++i) {\n        var pieces = queryPieces[i].split('=');\n        var paramName = pieces[0];\n        var paramValue = pieces[1];\n\n        if (paramName in params) {\n          params[paramName] = paramValue;\n        }\n      }\n    }\n\n    return params;\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    const input = document.getElementById('submitButton');\n    input.setAttribute('value', JSON.stringify(this.state.imgData));\n    console.log(input);\n    const form = document.getElementById('submitForm');\n    HTMLFormElement.prototype.submit.call(form);\n  }\n\n  submitTask(e) {\n    // e.preventDefault();\n    console.log(\"POSTing data\");\n    axios.post(\"\".concat(this.getSubmissionUrl()), {}).then(function (response) {\n      console.log(response);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  getSubmissionUrl() {\n    let mturkParams = this.parseParameters(window.location.href);\n    const assignmentID = mturkParams['assignmentId'];\n    const url = config[\"submit\"][env] + \"/?assignmentId=\" + assignmentID;\n    console.log(url);\n    return url;\n  }\n\n  render() {\n    const _this$state = this.state,\n          error = _this$state.error,\n          isLoaded = _this$state.isLoaded,\n          EnabledTools = _this$state.EnabledTools,\n          AllowComments = _this$state.AllowComments,\n          Tags = _this$state.Tags,\n          imgData = _this$state.imgData;\n    console.log(\"data is:\", this.state);\n\n    if (error) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 20\n        }\n      }, \"Error: \", error.message);\n    } else if (!isLoaded) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 20\n        }\n      }, \"Loading...\");\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        id: \"Submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        id: \"submitForm\",\n        type: \"submit\",\n        method: \"POST\",\n        action: this.getSubmissionUrl(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(AnnotationTool, {\n        name: \"AnnotationTool\",\n        type: \"submit\",\n        ref: value => {\n          this.value = value;\n        },\n        images: imgData,\n        enabledTools: EnabledTools,\n        regionTagList: Tags,\n        allowComments: AllowComments,\n        onExit: output => {\n          this.setState({\n            imgData: output.images\n          });\n          console.log(JSON.stringify(output.images));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"outline-dark\",\n        size: \"lg\",\n        block: true,\n        name: \"Annotation\",\n        type: \"submit\",\n        id: \"submitButton\",\n        value: JSON.stringify(this.state.imgData),\n        ref: value => {\n          this.value = value;\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 29\n        }\n      }, \"Complete the HIT\"))));\n    }\n  }\n\n}","map":{"version":3,"sources":["/Users/yan/Documents/GItHub/ML4GIS/client/src/pages/Home/SubmitHIT/main_SubmitHIT.js"],"names":["React","Component","axios","AnnotationTool","Button","env","process","NODE_ENV","config","require","SubmitHIT","constructor","props","state","error","isLoaded","EnabledTools","AllowComments","Tags","imgData","src","name","regions","submitTask","bind","getSubmissionUrl","handleSubmit","componentDidMount","getTools","res","console","log","Tools","getEnabledTools","data","enabledTools","i","length","push","fetch","mode","then","json","result","setState","parseParameters","url","params","queryString","split","queryPieces","pieces","paramName","paramValue","e","preventDefault","input","document","getElementById","setAttribute","JSON","stringify","form","HTMLFormElement","prototype","submit","call","post","response","catch","mturkParams","window","location","href","assignmentID","render","message","value","output","images"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport AnnotationTool from \"../annotateComponents/main_Annotate\";\nimport Button from 'react-bootstrap/Button';\n\nvar env = process.env.NODE_ENV;\nvar config = require(\"../../../config.json\");\n\n\nexport default class SubmitHIT extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            error: null,\n            isLoaded: false,\n            EnabledTools:null,\n            AllowComments:null,\n            Tags:null,\n            imgData: [\n                {\n                    src:\"https://geodata.lib.utexas.edu/assets/blac_featured_image_map-dca4cbca4e07010e5bd201ad8fab1cc0aa9abd24a8842f90e3c1eef1834e8498.jpg\",\n                    name: \"Image 1\",\n                    regions: []\n                },\n                {\n                    src:\"https://geodata.lib.utexas.edu/assets/utlmaps_featured_image_map-c07ae2551145ff2e5f5fa3c71baa345d9d674a33b08f422449203cf9ed47e0d1.jpg\",\n                    name: \"Image 2\",\n                    regions: []\n                },\n                {\n                    src:\"https://1igc0ojossa412h1e3ek8d1w-wpengine.netdna-ssl.com/wp-content/uploads/2018/03/TMSELEMWORLD.M.jpg\",\n                    name: \"Image 3\",\n                    regions: []\n                }\n            ],\n        }\n        this.props = props;\n        this.submitTask = this.submitTask.bind(this);\n        this.getSubmissionUrl = this.getSubmissionUrl.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.componentDidMount=this.componentDidMount(this);\n\n    }\n    getTools(res){\n        console.log(\"get tool:\",res.Tools['enenabledTools'])\n\n    }\n//get data from api\n    componentDidMount() {\n        function getEnabledTools(data) {\n            const enabledTools =data[\"enabledTools\"]\n            var res=[]\n            for (var i = 0; i < enabledTools.length; i++) {\n                if (enabledTools[i][\"create point\"]==true){\n                    res.push(\"create-point\")\n                }\n                else if (enabledTools[i][\"create rectangle\"]==true){\n                    res.push(\"create-rectangle\")\n                }\n                else if(enabledTools[i][\"create polygon\"]==true){\n                    res.push(\"create-polygon\")\n                }\n                else if(enabledTools[i][\"create polygon1\"]==true){\n                    res.push(\"create-polygon1\")\n                }\n                else if(enabledTools[i][\"create ellipse\"]==true){\n                    res.push(\"create-circle\")\n                }\n            }\n            return res\n\n        }\n\n        fetch(\"/api\",{ mode: 'cors'})\n            .then(res => res.json())\n            .then(\n                (result) => {\n                    const enabledTools=getEnabledTools(result[\"setup\"])\n                    this.setState({\n                        isLoaded: true,\n                        EnabledTools:enabledTools,\n                        AllowComments:result[\"setup\"][\"allow-comments\"],\n                        Tags:result[\"setup\"][\"tags\"]\n                    });\n                    console.log(\"res is: \", result)\n                },\n                // Note: it's important to handle errors here\n                // instead of a catch() block so that we don't swallow\n                // exceptions from actual bugs in components.\n                (error) => {\n                    this.setState({\n                        isLoaded: true,\n                        error\n                    });\n                }\n            )\n    }\n\n    parseParameters(url){\n        var params = {\n            'assignmentId' : null,\n            'hitId' : null,\n            'workerId' : null,\n            'turkSubmitTo' : null\n        };\n\n        var queryString = url.split('?')[1];\n\n        if (queryString){\n            var queryPieces = queryString.split('&');\n            for (var i = 0; i < queryPieces.length; ++i){\n                var pieces = queryPieces[i].split('=');\n                var paramName = pieces[0];\n                var paramValue = pieces[1];\n                if(paramName in params){\n                    params[paramName] = paramValue;\n                }\n            }\n        }\n\n        return params;\n    }\n\n    handleSubmit(e) {\n        e.preventDefault();\n        const input = document.getElementById('submitButton');\n        input.setAttribute('value', JSON.stringify(this.state.imgData));\n        console.log(input);\n        const form = document.getElementById('submitForm');\n        HTMLFormElement.prototype.submit.call(form);\n\n    }\n\n    submitTask(e) {\n        // e.preventDefault();\n        console.log(\"POSTing data\");\n        axios\n            .post(`${this.getSubmissionUrl()}`, {})\n            .then(function(response) {\n                console.log(response);\n            })\n            .catch(function(error) {\n                console.log(error);\n            });\n    }\n\n    getSubmissionUrl() {\n        let mturkParams = this.parseParameters(window.location.href);\n        const assignmentID =  mturkParams['assignmentId'];\n        const url = config[\"submit\"][env] + \"/?assignmentId=\" + assignmentID;\n        console.log(url);\n        return url;\n    }\n\n    render() {\n        const { error, isLoaded, EnabledTools, AllowComments, Tags, imgData} = this.state;\n        console.log(\"data is:\", this.state)\n        if (error) {\n            return <div>Error: {error.message}</div>;\n        } else if (!isLoaded) {\n            return <div>Loading...</div>;\n        } else {\n            return (\n                <div id=\"Submit\">\n\n                    <form\n                        id=\"submitForm\"\n                        type=\"submit\"\n                        method=\"POST\"\n                        action={this.getSubmissionUrl()}\n                    >\n                        <AnnotationTool\n                            name=\"AnnotationTool\"\n                            type=\"submit\"\n                            ref={value => {\n                                this.value = value;\n                            }}\n                            images={imgData}\n                            enabledTools={EnabledTools}\n                            regionTagList={Tags}\n                            allowComments={AllowComments}\n                            onExit={output => {\n                                this.setState({imgData: output.images});\n                                console.log(JSON.stringify(output.images))\n                            }}\n\n                        />\n                        <div>\n                            <Button variant=\"outline-dark\" size=\"lg\" block\n                                    name=\"Annotation\"\n                                    type=\"submit\"\n                                    id=\"submitButton\"\n                                    value={JSON.stringify(this.state.imgData)}\n                                    ref={value => {\n                                        this.value = value;\n                                    }}\n                            >Complete the HIT</Button>\n                        </div>\n                    </form>\n                </div>\n            );\n        }\n    }\n}\n"]},"metadata":{},"sourceType":"module"}