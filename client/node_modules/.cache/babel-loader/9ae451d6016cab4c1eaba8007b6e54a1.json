{"ast":null,"code":"import _objectSpread from\"D:\\\\GitHub\\\\ML4GIS\\\\client\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"D:\\\\GitHub\\\\ML4GIS\\\\client\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";import React,{useRef,useCallback}from\"react\";import{makeStyles,styled}from\"@material-ui/core/styles\";import ImageCanvas from\"../ImageCanvas/main_ImageCanvas\";import styles from\"./styles_MainLayout\";import type,{MainLayoutState,Action}from\"./types\";import useKey from\"use-key-hook\";import classnames from\"classnames\";import getActiveImage from\"../reducers/getActiveImage\";import{useDispatchHotkeyHandlers}from\"../ShortcutsManager/main_ShortcutsManager\";import{withHotKeys}from\"react-hotkeys\";import iconDictionary from\"./iconDictionary\";import Workspace from\"react-material-workspace-layout/Workspace\";import useEventCallback from\"use-event-callback\";// get style from style.js\nvar myStyle=makeStyles(styles);var HotkeyDiv=withHotKeys(function(_ref){var hotKeys=_ref.hotKeys,children=_ref.children,divRef=_ref.divRef,props=_objectWithoutProperties(_ref,[\"hotKeys\",\"children\",\"divRef\"]);return/*#__PURE__*/React.createElement(\"div\",Object.assign({},_objectSpread(_objectSpread({},hotKeys),props),{ref:divRef}),children);});export var MainLayout=function MainLayout(_ref2){var state=_ref2.state,dispatchAction=_ref2.dispatchAction;var classes=myStyle();var memoizedActionFns=useRef({});var action=function action(type){for(var _len=arguments.length,params=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){params[_key-1]=arguments[_key];}var fnKey=\"\".concat(type,\"(\").concat(params.join(\",\"),\")\");if(memoizedActionFns.current[fnKey])return memoizedActionFns.current[fnKey];var fn=function fn(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}return params.length>0?dispatchAction(_objectSpread({type:type},params.reduce(function(acc,p,i){return acc[p]=args[i],acc;},{}))):dispatchAction(_objectSpread({type:type},args[0]));};memoizedActionFns.current[fnKey]=fn;return fn;};var _getActiveImage=getActiveImage(state),currentImageIndex=_getActiveImage.currentImageIndex,activeImage=_getActiveImage.activeImage;var nextImage;if(currentImageIndex!==null){nextImage=state.images[currentImageIndex+1];}useKey(function(){return dispatchAction({type:\"CANCEL\"});},{detectKeys:[27]});var innerContainerRef=useRef();var hotkeyHandlers=useDispatchHotkeyHandlers({dispatchAction:dispatchAction});var refocusOnMouseEvent=useCallback(function(e){if(!innerContainerRef.current)return;if(innerContainerRef.current.contains(document.activeElement))return;if(innerContainerRef.current.contains(e.target)){innerContainerRef.current.focus();e.target.focus();}},[]);var canvas=/*#__PURE__*/React.createElement(ImageCanvas,{key:state.selectedImage,showTags:state.showTags,regionTagList:state.regionTagList,regions:activeImage.regions||[],realSize:activeImage?activeImage.realSize:undefined,imageSrc:state.annotationType===\"image\"?activeImage.src:null,pointDistancePrecision:state.pointDistancePrecision,createWithPrimary:state.selectedTool.includes(\"create\"),dragWithPrimary:state.selectedTool===\"pan\",zoomWithPrimary:state.selectedTool===\"zoom\",onMouseMove:action(\"MOUSE_MOVE\"),onMouseDown:action(\"MOUSE_DOWN\"),onMouseUp:action(\"MOUSE_UP\"),onChangeRegion:action(\"CHANGE_REGION\",\"region\"),onBeginRegionEdit:action(\"OPEN_REGION_EDITOR\",\"region\"),onCloseRegionEdit:action(\"CLOSE_REGION_EDITOR\",\"region\"),onDeleteRegion:action(\"DELETE_REGION\",\"region\"),onBeginBoxTransform:action(\"BEGIN_BOX_TRANSFORM\",\"rectangle\",\"directions\"),onBeginMovePolygonPoint:action(\"BEGIN_MOVE_POLYGON_POINT\",\"polygon\",\"pointIndex\"),onAddPolygonPoint:action(\"ADD_POLYGON_POINT\",\"polygon\",\"point\",\"pointIndex\"),onBeginMovePolygon1Point:action(\"BEGIN_MOVE_POLYGON1_POINT\",\"polygon1\",\"point1Index\"),onAddPolygon1Point:action(\"ADD_POLYGON1_POINT\",\"polygon1\",\"point1\",\"point1Index\"),onBeginCircleTransform:action(\"BEGIN_CIRCLE_TRANSFORM\",\"circle\",\"directions\"),onSelectRegion:action(\"SELECT_REGION\",\"region\"),onBeginMovePoint:action(\"BEGIN_MOVE_POINT\",\"point\"),onImageLoaded:action(\"IMAGE_LOADED\",\"image\"),allowComments:state.allowComments});var onClickIconSidebarItem=useEventCallback(function(item){dispatchAction({type:\"SELECT_TOOL\",selectedTool:item.name});});var onClickHeaderItem=useEventCallback(function(item){dispatchAction({type:\"HEADER_BUTTON_CLICKED\",buttonName:item.name});});return/*#__PURE__*/React.createElement(HotkeyDiv,{tabIndex:-1,divRef:innerContainerRef,onMouseDown:refocusOnMouseEvent,onMouseOver:refocusOnMouseEvent,allowChanges:true,handlers:hotkeyHandlers,className:classnames(classes.container)},/*#__PURE__*/React.createElement(Workspace,{iconDictionary:iconDictionary,headerLeftSide:[activeImage?/*#__PURE__*/React.createElement(\"div\",{className:classes.headerTitle},activeImage.name):null].filter(Boolean),headerItems:[{name:\"Prev\"},{name:\"Next\"},{name:\"Save\"}].filter(Boolean),onClickHeaderItem:onClickHeaderItem,onClickIconSidebarItem:onClickIconSidebarItem,selectedTools:[state.selectedTool].filter(Boolean),iconSidebarItems:[{name:\"pan\",helperText:\"Drag/Pan (right or middle click)\",alwaysShowing:true},{name:\"zoom\",helperText:\"Zoom In/Out\",alwaysShowing:true},{name:\"create-point\",helperText:\"Add Point\"},{name:\"create-rectangle\",helperText:\"Add Rectangle\"},{name:\"create-polygon\",helperText:\"Add Polygon\"},{name:\"create-polygon1\",helperText:\"Add Polygon with Holes\"},{name:\"create-circle\",helperText:\"Add Ellipse\"}].filter(Boolean).filter(function(a){return a.alwaysShowing||state.enabledTools.includes(a.name);})},canvas));};export default MainLayout;","map":{"version":3,"sources":["D:/GitHub/ML4GIS/client/src/pages/Home/annotateComponents/MainLayout/main_MainLayout.js"],"names":["React","useRef","useCallback","makeStyles","styled","ImageCanvas","styles","type","MainLayoutState","Action","useKey","classnames","getActiveImage","useDispatchHotkeyHandlers","withHotKeys","iconDictionary","Workspace","useEventCallback","myStyle","HotkeyDiv","hotKeys","children","divRef","props","MainLayout","state","dispatchAction","classes","memoizedActionFns","action","params","fnKey","join","current","fn","args","length","reduce","acc","p","i","currentImageIndex","activeImage","nextImage","images","detectKeys","innerContainerRef","hotkeyHandlers","refocusOnMouseEvent","e","contains","document","activeElement","target","focus","canvas","selectedImage","showTags","regionTagList","regions","realSize","undefined","annotationType","src","pointDistancePrecision","selectedTool","includes","allowComments","onClickIconSidebarItem","item","name","onClickHeaderItem","buttonName","container","headerTitle","filter","Boolean","helperText","alwaysShowing","a","enabledTools"],"mappings":"6SACA,MAAOA,CAAAA,KAAP,EAAgBC,MAAhB,CAAwBC,WAAxB,KAA2C,OAA3C,CACA,OAASC,UAAT,CAAqBC,MAArB,KAAmC,0BAAnC,CACA,MAAOC,CAAAA,WAAP,KAAwB,iCAAxB,CACA,MAAOC,CAAAA,MAAP,KAAmB,qBAAnB,CACA,MAAOC,CAAAA,IAAP,EAAeC,eAAf,CAAgCC,MAAhC,KAA8C,SAA9C,CACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CACA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CACA,MAAOC,CAAAA,cAAP,KAA2B,4BAA3B,CACA,OAASC,yBAAT,KAA0C,2CAA1C,CACA,OAASC,WAAT,KAA4B,eAA5B,CACA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,SAAP,KAAsB,2CAAtB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,oBAA7B,CACA;AAEA,GAAMC,CAAAA,OAAO,CAAGf,UAAU,CAACG,MAAD,CAA1B,CAEA,GAAMa,CAAAA,SAAS,CAAGL,WAAW,CAAC,kBAAGM,CAAAA,OAAH,MAAGA,OAAH,CAAYC,QAAZ,MAAYA,QAAZ,CAAsBC,MAAtB,MAAsBA,MAAtB,CAAiCC,KAAjC,mFAC5B,0EAAcH,OAAd,EAA0BG,KAA1B,GAAmC,GAAG,CAAED,MAAxC,GACGD,QADH,CAD4B,EAAD,CAA7B,CAYA,MAAO,IAAMG,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,OAGb,IAFXC,CAAAA,KAEW,OAFXA,KAEW,CADXC,cACW,OADXA,cACW,CACX,GAAMC,CAAAA,OAAO,CAAGT,OAAO,EAAvB,CAEA,GAAMU,CAAAA,iBAAiB,CAAG3B,MAAM,CAAC,EAAD,CAAhC,CACA,GAAM4B,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACtB,IAAD,CAA4C,+BAA1BuB,MAA0B,qDAA1BA,MAA0B,0BACzD,GAAMC,CAAAA,KAAK,WAAMxB,IAAN,aAAcuB,MAAM,CAACE,IAAP,CAAY,GAAZ,CAAd,KAAX,CACA,GAAIJ,iBAAiB,CAACK,OAAlB,CAA0BF,KAA1B,CAAJ,CACE,MAAOH,CAAAA,iBAAiB,CAACK,OAAlB,CAA0BF,KAA1B,CAAP,CAEF,GAAMG,CAAAA,EAAE,CAAG,QAALA,CAAAA,EAAK,kCAAIC,IAAJ,+CAAIA,IAAJ,gCACTL,CAAAA,MAAM,CAACM,MAAP,CAAgB,CAAhB,CACIV,cAAc,gBAEVnB,IAAI,CAAJA,IAFU,EAGPuB,MAAM,CAACO,MAAP,CAAc,SAACC,GAAD,CAAMC,CAAN,CAASC,CAAT,QAAiBF,CAAAA,GAAG,CAACC,CAAD,CAAH,CAASJ,IAAI,CAACK,CAAD,CAAd,CAAoBF,GAApC,EAAd,CAAwD,EAAxD,CAHO,EADlB,CAOIZ,cAAc,gBAAGnB,IAAI,CAAJA,IAAH,EAAY4B,IAAI,CAAC,CAAD,CAAhB,EART,EAAX,CASAP,iBAAiB,CAACK,OAAlB,CAA0BF,KAA1B,EAAmCG,EAAnC,CACA,MAAOA,CAAAA,EAAP,CACD,CAhBD,CAJW,oBAsBgCtB,cAAc,CAACa,KAAD,CAtB9C,CAsBHgB,iBAtBG,iBAsBHA,iBAtBG,CAsBgBC,WAtBhB,iBAsBgBA,WAtBhB,CAuBX,GAAIC,CAAAA,SAAJ,CACA,GAAIF,iBAAiB,GAAK,IAA1B,CAAgC,CAC9BE,SAAS,CAAGlB,KAAK,CAACmB,MAAN,CAAaH,iBAAiB,CAAG,CAAjC,CAAZ,CACD,CAED/B,MAAM,CAAC,iBAAMgB,CAAAA,cAAc,CAAC,CAAEnB,IAAI,CAAE,QAAR,CAAD,CAApB,EAAD,CAA2C,CAC/CsC,UAAU,CAAE,CAAC,EAAD,CADmC,CAA3C,CAAN,CAIA,GAAMC,CAAAA,iBAAiB,CAAG7C,MAAM,EAAhC,CACA,GAAM8C,CAAAA,cAAc,CAAGlC,yBAAyB,CAAC,CAAEa,cAAc,CAAdA,cAAF,CAAD,CAAhD,CACA,GAAMsB,CAAAA,mBAAmB,CAAG9C,WAAW,CAAC,SAAC+C,CAAD,CAAO,CAC7C,GAAI,CAACH,iBAAiB,CAACb,OAAvB,CAAgC,OAChC,GAAIa,iBAAiB,CAACb,OAAlB,CAA0BiB,QAA1B,CAAmCC,QAAQ,CAACC,aAA5C,CAAJ,CAAgE,OAChE,GAAIN,iBAAiB,CAACb,OAAlB,CAA0BiB,QAA1B,CAAmCD,CAAC,CAACI,MAArC,CAAJ,CAAkD,CAChDP,iBAAiB,CAACb,OAAlB,CAA0BqB,KAA1B,GACAL,CAAC,CAACI,MAAF,CAASC,KAAT,GACD,CACF,CAPsC,CAOpC,EAPoC,CAAvC,CASA,GAAMC,CAAAA,MAAM,cACV,oBAAC,WAAD,EACE,GAAG,CAAE9B,KAAK,CAAC+B,aADb,CAEE,QAAQ,CAAE/B,KAAK,CAACgC,QAFlB,CAGE,aAAa,CAAEhC,KAAK,CAACiC,aAHvB,CAIE,OAAO,CACLhB,WAAW,CAACiB,OAAZ,EAAuB,EAL3B,CAOE,QAAQ,CAAEjB,WAAW,CAAGA,WAAW,CAACkB,QAAf,CAA0BC,SAPjD,CAQE,QAAQ,CAAEpC,KAAK,CAACqC,cAAN,GAAyB,OAAzB,CAAmCpB,WAAW,CAACqB,GAA/C,CAAqD,IARjE,CASE,sBAAsB,CAAEtC,KAAK,CAACuC,sBAThC,CAUE,iBAAiB,CAAEvC,KAAK,CAACwC,YAAN,CAAmBC,QAAnB,CAA4B,QAA5B,CAVrB,CAWE,eAAe,CAAEzC,KAAK,CAACwC,YAAN,GAAuB,KAX1C,CAYE,eAAe,CAAExC,KAAK,CAACwC,YAAN,GAAuB,MAZ1C,CAaE,WAAW,CAAEpC,MAAM,CAAC,YAAD,CAbrB,CAcE,WAAW,CAAEA,MAAM,CAAC,YAAD,CAdrB,CAeE,SAAS,CAAEA,MAAM,CAAC,UAAD,CAfnB,CAgBE,cAAc,CAAEA,MAAM,CAAC,eAAD,CAAkB,QAAlB,CAhBxB,CAiBE,iBAAiB,CAAEA,MAAM,CAAC,oBAAD,CAAuB,QAAvB,CAjB3B,CAkBE,iBAAiB,CAAEA,MAAM,CAAC,qBAAD,CAAwB,QAAxB,CAlB3B,CAmBE,cAAc,CAAEA,MAAM,CAAC,eAAD,CAAkB,QAAlB,CAnBxB,CAoBE,mBAAmB,CAAEA,MAAM,CAAC,qBAAD,CAAwB,WAAxB,CAAqC,YAArC,CApB7B,CAqBE,uBAAuB,CAAEA,MAAM,CAC7B,0BAD6B,CAE7B,SAF6B,CAG7B,YAH6B,CArBjC,CA0BE,iBAAiB,CAAEA,MAAM,CACvB,mBADuB,CAEvB,SAFuB,CAGvB,OAHuB,CAIvB,YAJuB,CA1B3B,CAgCE,wBAAwB,CAAEA,MAAM,CAC5B,2BAD4B,CAE5B,UAF4B,CAG5B,aAH4B,CAhClC,CAqCE,kBAAkB,CAAEA,MAAM,CACtB,oBADsB,CAEtB,UAFsB,CAGtB,QAHsB,CAItB,aAJsB,CArC5B,CA2CE,sBAAsB,CAAEA,MAAM,CAC1B,wBAD0B,CAE1B,QAF0B,CAG1B,YAH0B,CA3ChC,CAgDE,cAAc,CAAEA,MAAM,CAAC,eAAD,CAAkB,QAAlB,CAhDxB,CAiDE,gBAAgB,CAAEA,MAAM,CAAC,kBAAD,CAAqB,OAArB,CAjD1B,CAkDE,aAAa,CAAEA,MAAM,CAAC,cAAD,CAAiB,OAAjB,CAlDvB,CAmDE,aAAa,CAAEJ,KAAK,CAAC0C,aAnDvB,EADF,CAwDA,GAAMC,CAAAA,sBAAsB,CAAGnD,gBAAgB,CAAC,SAACoD,IAAD,CAAU,CACxD3C,cAAc,CAAC,CAAEnB,IAAI,CAAE,aAAR,CAAuB0D,YAAY,CAAEI,IAAI,CAACC,IAA1C,CAAD,CAAd,CACD,CAF8C,CAA/C,CAIA,GAAMC,CAAAA,iBAAiB,CAAGtD,gBAAgB,CAAC,SAACoD,IAAD,CAAU,CACnD3C,cAAc,CAAC,CAAEnB,IAAI,CAAE,uBAAR,CAAiCiE,UAAU,CAAEH,IAAI,CAACC,IAAlD,CAAD,CAAd,CACD,CAFyC,CAA1C,CAGA,mBACM,oBAAC,SAAD,EACE,QAAQ,CAAE,CAAC,CADb,CAEE,MAAM,CAAExB,iBAFV,CAGE,WAAW,CAAEE,mBAHf,CAIE,WAAW,CAAEA,mBAJf,CAKE,YAAY,KALd,CAME,QAAQ,CAAED,cANZ,CAOE,SAAS,CAAEpC,UAAU,CACnBgB,OAAO,CAAC8C,SADW,CAPvB,eAYE,oBAAC,SAAD,EACE,cAAc,CAAE1D,cADlB,CAEE,cAAc,CAAE,CACb2B,WAAW,cACV,2BAAK,SAAS,CAAEf,OAAO,CAAC+C,WAAxB,EAAsChC,WAAW,CAAC4B,IAAlD,CADU,CAER,IAHU,EAIdK,MAJc,CAIPC,OAJO,CAFlB,CAOE,WAAW,CAAE,CACX,CAAEN,IAAI,CAAE,MAAR,CADW,CAEX,CAAEA,IAAI,CAAE,MAAR,CAFW,CAGX,CAAEA,IAAI,CAAE,MAAR,CAHW,EAIXK,MAJW,CAIJC,OAJI,CAPf,CAYE,iBAAiB,CAAEL,iBAZrB,CAaE,sBAAsB,CAAEH,sBAb1B,CAcE,aAAa,CAAE,CACb3C,KAAK,CAACwC,YADO,EAEbU,MAFa,CAENC,OAFM,CAdjB,CAiBE,gBAAgB,CAAE,CAChB,CACEN,IAAI,CAAE,KADR,CAEEO,UAAU,CACR,kCAHJ,CAIEC,aAAa,CAAE,IAJjB,CADgB,CAOhB,CACER,IAAI,CAAE,MADR,CAEEO,UAAU,CACR,aAHJ,CAIEC,aAAa,CAAE,IAJjB,CAPgB,CAahB,CACER,IAAI,CAAE,cADR,CAEEO,UAAU,CAAE,WAFd,CAbgB,CAiBhB,CACEP,IAAI,CAAE,kBADR,CAEEO,UAAU,CACR,eAHJ,CAjBgB,CAsBhB,CACEP,IAAI,CAAE,gBADR,CAEEO,UAAU,CAAE,aAFd,CAtBgB,CA0BhB,CACEP,IAAI,CAAE,iBADR,CAEEO,UAAU,CAAE,wBAFd,CA1BgB,CA8BhB,CACEP,IAAI,CAAE,eADR,CAEEO,UAAU,CAAE,aAFd,CA9BgB,EAoCfF,MApCe,CAoCRC,OApCQ,EAqCfD,MArCe,CAsCd,SAACI,CAAD,QAAOA,CAAAA,CAAC,CAACD,aAAF,EAAmBrD,KAAK,CAACuD,YAAN,CAAmBd,QAAnB,CAA4Ba,CAAC,CAACT,IAA9B,CAA1B,EAtCc,CAjBpB,EA2DGf,MA3DH,CAZF,CADN,CA4ED,CAzLM,CA2LP,cAAe/B,CAAAA,UAAf","sourcesContent":["\r\nimport React, { useRef, useCallback } from \"react\"\r\nimport { makeStyles, styled } from \"@material-ui/core/styles\"\r\nimport ImageCanvas from \"../ImageCanvas/main_ImageCanvas\"\r\nimport styles from \"./styles_MainLayout\"\r\nimport type, { MainLayoutState, Action } from \"./types\"\r\nimport useKey from \"use-key-hook\"\r\nimport classnames from \"classnames\"\r\nimport getActiveImage from \"../reducers/getActiveImage\"\r\nimport { useDispatchHotkeyHandlers } from \"../ShortcutsManager/main_ShortcutsManager\"\r\nimport { withHotKeys } from \"react-hotkeys\"\r\nimport iconDictionary from \"./iconDictionary\"\r\nimport Workspace from \"react-material-workspace-layout/Workspace\"\r\nimport useEventCallback from \"use-event-callback\"\r\n// get style from style.js\r\n\r\nconst myStyle = makeStyles(styles)\r\n\r\nconst HotkeyDiv = withHotKeys(({ hotKeys, children, divRef, ...props }) => (\r\n  <div {...{ ...hotKeys, ...props }} ref={divRef}>\r\n    {children}\r\n  </div>\r\n))\r\n\r\ntype Props = {\r\n  state: MainLayoutState,\r\n  dispatchAction: (Action) => any,\r\n  onRegionClassAdded: () => {},\r\n}\r\n\r\nexport const MainLayout = ({\r\n  state,\r\n  dispatchAction,\r\n}: Props) => {\r\n  const classes = myStyle()\r\n\r\n  const memoizedActionFns = useRef({})\r\n  const action = (type: string, ...params: Array<string>) => {\r\n    const fnKey = `${type}(${params.join(\",\")})`\r\n    if (memoizedActionFns.current[fnKey])\r\n      return memoizedActionFns.current[fnKey]\r\n\r\n    const fn = (...args: any) =>\r\n      params.length > 0\r\n        ? dispatchAction(\r\n            ({\r\n              type,\r\n              ...params.reduce((acc, p, i) => ((acc[p] = args[i]), acc), {}),\r\n            }: any)\r\n          )\r\n        : dispatchAction({ type, ...args[0] })\r\n    memoizedActionFns.current[fnKey] = fn\r\n    return fn\r\n  }\r\n\r\n  const { currentImageIndex, activeImage } = getActiveImage(state)\r\n  let nextImage\r\n  if (currentImageIndex !== null) {\r\n    nextImage = state.images[currentImageIndex + 1]\r\n  }\r\n\r\n  useKey(() => dispatchAction({ type: \"CANCEL\" }), {\r\n    detectKeys: [27],\r\n  })\r\n\r\n  const innerContainerRef = useRef()\r\n  const hotkeyHandlers = useDispatchHotkeyHandlers({ dispatchAction })\r\n  const refocusOnMouseEvent = useCallback((e) => {\r\n    if (!innerContainerRef.current) return\r\n    if (innerContainerRef.current.contains(document.activeElement)) return\r\n    if (innerContainerRef.current.contains(e.target)) {\r\n      innerContainerRef.current.focus()\r\n      e.target.focus()\r\n    }\r\n  }, [])\r\n\r\n  const canvas = (\r\n    <ImageCanvas\r\n      key={state.selectedImage}\r\n      showTags={state.showTags}\r\n      regionTagList={state.regionTagList}\r\n      regions={\r\n        activeImage.regions || []\r\n      }\r\n      realSize={activeImage ? activeImage.realSize : undefined}\r\n      imageSrc={state.annotationType === \"image\" ? activeImage.src : null}\r\n      pointDistancePrecision={state.pointDistancePrecision}\r\n      createWithPrimary={state.selectedTool.includes(\"create\")}\r\n      dragWithPrimary={state.selectedTool === \"pan\"}\r\n      zoomWithPrimary={state.selectedTool === \"zoom\"}\r\n      onMouseMove={action(\"MOUSE_MOVE\")}\r\n      onMouseDown={action(\"MOUSE_DOWN\")}\r\n      onMouseUp={action(\"MOUSE_UP\")}\r\n      onChangeRegion={action(\"CHANGE_REGION\", \"region\")}\r\n      onBeginRegionEdit={action(\"OPEN_REGION_EDITOR\", \"region\")}\r\n      onCloseRegionEdit={action(\"CLOSE_REGION_EDITOR\", \"region\")}\r\n      onDeleteRegion={action(\"DELETE_REGION\", \"region\")}\r\n      onBeginBoxTransform={action(\"BEGIN_BOX_TRANSFORM\", \"rectangle\", \"directions\")}\r\n      onBeginMovePolygonPoint={action(\r\n        \"BEGIN_MOVE_POLYGON_POINT\",\r\n        \"polygon\",\r\n        \"pointIndex\"\r\n      )}\r\n      onAddPolygonPoint={action(\r\n        \"ADD_POLYGON_POINT\",\r\n        \"polygon\",\r\n        \"point\",\r\n        \"pointIndex\"\r\n      )}\r\n      onBeginMovePolygon1Point={action(\r\n          \"BEGIN_MOVE_POLYGON1_POINT\",\r\n          \"polygon1\",\r\n          \"point1Index\"\r\n      )}\r\n      onAddPolygon1Point={action(\r\n          \"ADD_POLYGON1_POINT\",\r\n          \"polygon1\",\r\n          \"point1\",\r\n          \"point1Index\"\r\n      )}\r\n      onBeginCircleTransform={action(\r\n          \"BEGIN_CIRCLE_TRANSFORM\",\r\n          \"circle\",\r\n          \"directions\"\r\n      )}\r\n      onSelectRegion={action(\"SELECT_REGION\", \"region\")}\r\n      onBeginMovePoint={action(\"BEGIN_MOVE_POINT\", \"point\")}\r\n      onImageLoaded={action(\"IMAGE_LOADED\", \"image\")}\r\n      allowComments={state.allowComments}\r\n    />\r\n  )\r\n\r\n  const onClickIconSidebarItem = useEventCallback((item) => {\r\n    dispatchAction({ type: \"SELECT_TOOL\", selectedTool: item.name })\r\n  })\r\n\r\n  const onClickHeaderItem = useEventCallback((item) => {\r\n    dispatchAction({ type: \"HEADER_BUTTON_CLICKED\", buttonName: item.name })\r\n  })\r\n  return (\r\n        <HotkeyDiv\r\n          tabIndex={-1}\r\n          divRef={innerContainerRef}\r\n          onMouseDown={refocusOnMouseEvent}\r\n          onMouseOver={refocusOnMouseEvent}\r\n          allowChanges\r\n          handlers={hotkeyHandlers}\r\n          className={classnames(\r\n            classes.container,\r\n\r\n          )}\r\n        >\r\n          <Workspace\r\n            iconDictionary={iconDictionary}\r\n            headerLeftSide={[\r\n               activeImage ? (\r\n                <div className={classes.headerTitle}>{activeImage.name}</div>\r\n              ) : null,\r\n            ].filter(Boolean)}\r\n            headerItems={[\r\n              { name: \"Prev\" },\r\n              { name: \"Next\" },\r\n              { name: \"Save\" },\r\n            ].filter(Boolean)}\r\n            onClickHeaderItem={onClickHeaderItem}\r\n            onClickIconSidebarItem={onClickIconSidebarItem}\r\n            selectedTools={[\r\n              state.selectedTool,\r\n            ].filter(Boolean)}\r\n            iconSidebarItems={[\r\n              {\r\n                name: \"pan\",\r\n                helperText:\r\n                  \"Drag/Pan (right or middle click)\",\r\n                alwaysShowing: true,\r\n              },\r\n              {\r\n                name: \"zoom\",\r\n                helperText:\r\n                  \"Zoom In/Out\",\r\n                alwaysShowing: true,\r\n              },\r\n              {\r\n                name: \"create-point\",\r\n                helperText: \"Add Point\" ,\r\n              },\r\n              {\r\n                name: \"create-rectangle\",\r\n                helperText:\r\n                  \"Add Rectangle\" ,\r\n              },\r\n              {\r\n                name: \"create-polygon\",\r\n                helperText: \"Add Polygon\",\r\n              },\r\n              {\r\n                name: \"create-polygon1\",\r\n                helperText: \"Add Polygon with Holes\",\r\n              },\r\n              {\r\n                name: \"create-circle\",\r\n                helperText: \"Add Ellipse\",\r\n              },\r\n\r\n            ]\r\n              .filter(Boolean)\r\n              .filter(\r\n                (a) => a.alwaysShowing || state.enabledTools.includes(a.name)\r\n              )}\r\n\r\n          >\r\n            {canvas}\r\n          </Workspace>\r\n        </HotkeyDiv>\r\n  )\r\n}\r\n\r\nexport default MainLayout\r\n"]},"metadata":{},"sourceType":"module"}