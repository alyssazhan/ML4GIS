{"ast":null,"code":"import _objectSpread from \"/Users/yan/Documents/proj/ML4GIS/client/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/yan/Documents/proj/ML4GIS/client/src/annotateComponents/RegionTags/index.js\";\nimport React from \"react\";\nimport Paper from \"@material-ui/core/Paper\";\nimport DefaultRegionLabel from \"../RegionLabel\";\nimport LockIcon from \"@material-ui/icons/Lock\";\n\nconst copyWithout = (obj, ...args) => {\n  const newObj = _objectSpread({}, obj);\n\n  for (var _i = 0, _args = args; _i < _args.length; _i++) {\n    const arg = _args[_i];\n    delete newObj[arg];\n  }\n\n  return newObj;\n};\n\nexport const RegionTags = ({\n  regions,\n  projectRegionBox,\n  mouseEvents,\n  regionTagList,\n  onBeginRegionEdit,\n  onChangeRegion,\n  onCloseRegionEdit,\n  onDeleteRegion,\n  layoutParams,\n  imageSrc,\n  RegionEditLabel,\n  onRegionClassAdded,\n  allowComments\n}) => {\n  const RegionLabel = RegionEditLabel != null ? RegionEditLabel : DefaultRegionLabel;\n  return regions.filter(r => r.visible || r.visible === undefined).map(region => {\n    const pbox = projectRegionBox(region);\n    const _layoutParams$current = layoutParams.current,\n          iw = _layoutParams$current.iw,\n          ih = _layoutParams$current.ih;\n    let margin = 8;\n    if (region.highlighted && region.type === \"rectangle\") margin += 6;\n    const labelBoxHeight = region.editingLabels && !region.locked ? 170 : region.tags ? 60 : 50;\n    const displayOnTop = pbox.y > labelBoxHeight;\n    const coords = displayOnTop ? {\n      left: pbox.x,\n      top: pbox.y - margin / 2\n    } : {\n      left: pbox.x,\n      top: pbox.y + pbox.h + margin / 2\n    };\n\n    if (region.locked) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: region.id,\n        style: _objectSpread(_objectSpread({\n          position: \"absolute\"\n        }, coords), {}, {\n          zIndex: 10 + (region.editingLabels ? 5 : 0)\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Paper, {\n        style: _objectSpread(_objectSpread({\n          position: \"absolute\",\n          left: 0\n        }, displayOnTop ? {\n          bottom: 0\n        } : {\n          top: 0\n        }), {}, {\n          zIndex: 10,\n          backgroundColor: \"#fff\",\n          borderRadius: 4,\n          padding: 2,\n          paddingBottom: 0,\n          opacity: 0.5,\n          pointerEvents: \"none\"\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(LockIcon, {\n        style: {\n          width: 16,\n          height: 16,\n          color: \"#333\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 15\n        }\n      })));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: region.id,\n      style: _objectSpread(_objectSpread({\n        position: \"absolute\"\n      }, coords), {}, {\n        zIndex: 10 + (region.editingLabels ? 5 : 0),\n        width: 200\n      }),\n      onMouseDown: e => e.preventDefault(),\n      onMouseUp: e => e.preventDefault(),\n      onMouseEnter: e => {\n        if (region.editingLabels) {\n          mouseEvents.onMouseUp(e);\n          e.button = 1;\n          mouseEvents.onMouseUp(e);\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", Object.assign({\n      style: _objectSpread({\n        position: \"absolute\",\n        zIndex: 20,\n        left: 0\n      }, displayOnTop ? {\n        bottom: 0\n      } : {\n        top: 0\n      })\n    }, !region.editingLabels ? copyWithout(mouseEvents, \"onMouseDown\", \"onMouseUp\") : {}, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(RegionLabel, {\n      allowedTags: regionTagList,\n      onOpen: onBeginRegionEdit,\n      onChange: onChangeRegion,\n      onClose: onCloseRegionEdit,\n      onDelete: onDeleteRegion,\n      editing: region.editingLabels,\n      region: region,\n      regions: regions,\n      imageSrc: imageSrc,\n      onRegionClassAdded: onRegionClassAdded,\n      allowComments: allowComments,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }\n    })));\n  });\n};\nexport default RegionTags;","map":{"version":3,"sources":["/Users/yan/Documents/proj/ML4GIS/client/src/annotateComponents/RegionTags/index.js"],"names":["React","Paper","DefaultRegionLabel","LockIcon","copyWithout","obj","args","newObj","arg","RegionTags","regions","projectRegionBox","mouseEvents","regionTagList","onBeginRegionEdit","onChangeRegion","onCloseRegionEdit","onDeleteRegion","layoutParams","imageSrc","RegionEditLabel","onRegionClassAdded","allowComments","RegionLabel","filter","r","visible","undefined","map","region","pbox","current","iw","ih","margin","highlighted","type","labelBoxHeight","editingLabels","locked","tags","displayOnTop","y","coords","left","x","top","h","id","position","zIndex","bottom","backgroundColor","borderRadius","padding","paddingBottom","opacity","pointerEvents","width","height","color","e","preventDefault","onMouseUp","button"],"mappings":"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","sourcesContent":["\nimport React from \"react\"\nimport Paper from \"@material-ui/core/Paper\"\nimport DefaultRegionLabel from \"../RegionLabel\"\nimport LockIcon from \"@material-ui/icons/Lock\"\n\nconst copyWithout = (obj, ...args) => {\n  const newObj = { ...obj }\n  for (const arg of args) {\n    delete newObj[arg]\n  }\n  return newObj\n}\n\nexport const RegionTags = ({\n  regions,\n  projectRegionBox,\n  mouseEvents,\n  regionTagList,\n  onBeginRegionEdit,\n  onChangeRegion,\n  onCloseRegionEdit,\n  onDeleteRegion,\n  layoutParams,\n  imageSrc,\n  RegionEditLabel,\n  onRegionClassAdded,\n                               allowComments,\n}) => {\n  const RegionLabel =\n    RegionEditLabel != null ? RegionEditLabel : DefaultRegionLabel\n  return regions\n    .filter((r) => r.visible || r.visible === undefined)\n    .map((region) => {\n      const pbox = projectRegionBox(region)\n      const { iw, ih } = layoutParams.current\n      let margin = 8\n      if (region.highlighted && region.type === \"rectangle\") margin += 6\n      const labelBoxHeight =\n        region.editingLabels && !region.locked ? 170 : region.tags ? 60 : 50\n      const displayOnTop = pbox.y > labelBoxHeight\n\n      const coords = displayOnTop\n        ? {\n            left: pbox.x,\n            top: pbox.y - margin / 2,\n          }\n        : { left: pbox.x, top: pbox.y + pbox.h + margin / 2 }\n      if (region.locked) {\n        return (\n          <div\n            key={region.id}\n            style={{\n              position: \"absolute\",\n              ...coords,\n              zIndex: 10 + (region.editingLabels ? 5 : 0),\n            }}\n          >\n            <Paper\n              style={{\n                position: \"absolute\",\n                left: 0,\n                ...(displayOnTop ? { bottom: 0 } : { top: 0 }),\n                zIndex: 10,\n                backgroundColor: \"#fff\",\n                borderRadius: 4,\n                padding: 2,\n                paddingBottom: 0,\n                opacity: 0.5,\n                pointerEvents: \"none\",\n              }}\n            >\n              <LockIcon style={{ width: 16, height: 16, color: \"#333\" }} />\n            </Paper>\n          </div>\n        )\n      }\n      return (\n        <div\n          key={region.id}\n          style={{\n            position: \"absolute\",\n            ...coords,\n            zIndex: 10 + (region.editingLabels ? 5 : 0),\n            width: 200,\n          }}\n          onMouseDown={(e) => e.preventDefault()}\n          onMouseUp={(e) => e.preventDefault()}\n          onMouseEnter={(e) => {\n            if (region.editingLabels) {\n              mouseEvents.onMouseUp(e)\n              e.button = 1\n              mouseEvents.onMouseUp(e)\n            }\n          }}\n        >\n          <div\n            style={{\n              position: \"absolute\",\n              zIndex: 20,\n              left: 0,\n              ...(displayOnTop ? { bottom: 0 } : { top: 0 }),\n            }}\n            {...(!region.editingLabels\n              ? copyWithout(mouseEvents, \"onMouseDown\", \"onMouseUp\")\n              : {})}\n          >\n            <RegionLabel\n              allowedTags={regionTagList}\n              onOpen={onBeginRegionEdit}\n              onChange={onChangeRegion}\n              onClose={onCloseRegionEdit}\n              onDelete={onDeleteRegion}\n              editing={region.editingLabels}\n              region={region}\n              regions={regions}\n              imageSrc={imageSrc}\n              onRegionClassAdded={onRegionClassAdded}\n              allowComments={allowComments}\n            />\n          </div>\n        </div>\n      )\n    })\n}\n\nexport default RegionTags\n"]},"metadata":{},"sourceType":"module"}