{"ast":null,"code":"import _objectSpread from \"/Users/yan/Documents/proj/ML4GIS/client/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/yan/Documents/proj/ML4GIS/client/src/annotateComponents/HighlightBox/index.js\";\nimport React from \"react\";\nimport classnames from \"classnames\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nconst useStyles = makeStyles({\n  \"@keyframes borderDance\": {\n    from: {\n      strokeDashoffset: 0\n    },\n    to: {\n      strokeDashoffset: 100\n    }\n  },\n  highlightBox: {\n    zIndex: 2,\n    transition: \"opacity 500ms\",\n    \"&.highlighted\": {\n      zIndex: 3\n    },\n    \"&:not(.highlighted)\": {\n      opacity: 0\n    },\n    \"&:not(.highlighted):hover\": {\n      opacity: 0.6\n    },\n    \"& path\": {\n      vectorEffect: \"non-scaling-stroke\",\n      strokeWidth: 2,\n      stroke: \"#FFF\",\n      fill: \"none\",\n      strokeDasharray: 5,\n      animationName: \"$borderDance\",\n      animationDuration: \"4s\",\n      animationTimingFunction: \"linear\",\n      animationIterationCount: \"infinite\",\n      animationPlayState: \"running\"\n    }\n  }\n});\nexport const HighlightBox = ({\n  mouseEvents,\n  dragWithPrimary,\n  zoomWithPrimary,\n  createWithPrimary,\n  onBeginMovePoint,\n  onSelectRegion,\n  region: r,\n  pbox\n}) => {\n  const classes = useStyles();\n  if (!pbox.w || pbox.w === Infinity) return null;\n  if (!pbox.h || pbox.h === Infinity) return null;\n  if (r.unfinished) return null;\n  const styleCoords = r.type === \"point\" ? {\n    left: pbox.x + pbox.w / 2 - 30,\n    top: pbox.y + pbox.h / 2 - 30,\n    width: 60,\n    height: 60\n  } : {\n    left: pbox.x - 5,\n    top: pbox.y - 5,\n    width: pbox.w + 10,\n    height: pbox.h + 10\n  };\n  const pathD = r.type === \"point\" ? \"M5,5 L\".concat(styleCoords.width - 5, \" 5L\").concat(styleCoords.width - 5, \" \").concat(styleCoords.height - 5, \"L5 \").concat(styleCoords.height - 5, \"Z\") : \"M5,5 L\".concat(pbox.w + 5, \",5 L\").concat(pbox.w + 5, \",\").concat(pbox.h + 5, \" L5,\").concat(pbox.h + 5, \" Z\");\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    key: r.id,\n    className: classnames(classes.highlightBox, {\n      highlighted: r.highlighted\n    })\n  }, mouseEvents, !zoomWithPrimary && !dragWithPrimary ? {\n    onMouseDown: e => {\n      if (!r.locked && r.type === \"point\" && r.highlighted && e.button === 0) {\n        return onBeginMovePoint(r);\n      }\n\n      if (e.button === 0 && !createWithPrimary) return onSelectRegion(r);\n      mouseEvents.onMouseDown(e);\n    }\n  } : {}, {\n    style: _objectSpread(_objectSpread({}, r.highlighted ? {\n      pointerEvents: r.type !== \"point\" ? \"none\" : undefined,\n      cursor: \"grab\"\n    } : {\n      cursor: !(zoomWithPrimary || dragWithPrimary || createWithPrimary) ? \"pointer\" : undefined,\n      pointerEvents: zoomWithPrimary || dragWithPrimary || createWithPrimary && !r.highlighted ? \"none\" : undefined\n    }), {}, {\n      position: \"absolute\"\n    }, styleCoords),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: pathD,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }));\n};\nexport default HighlightBox;","map":{"version":3,"sources":["/Users/yan/Documents/proj/ML4GIS/client/src/annotateComponents/HighlightBox/index.js"],"names":["React","classnames","makeStyles","useStyles","from","strokeDashoffset","to","highlightBox","zIndex","transition","opacity","vectorEffect","strokeWidth","stroke","fill","strokeDasharray","animationName","animationDuration","animationTimingFunction","animationIterationCount","animationPlayState","HighlightBox","mouseEvents","dragWithPrimary","zoomWithPrimary","createWithPrimary","onBeginMovePoint","onSelectRegion","region","r","pbox","classes","w","Infinity","h","unfinished","styleCoords","type","left","x","top","y","width","height","pathD","id","highlighted","onMouseDown","e","locked","button","pointerEvents","undefined","cursor","position"],"mappings":";;AAEA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,SAASC,UAAT,QAA2B,0BAA3B;AAEA,MAAMC,SAAS,GAAGD,UAAU,CAAC;AAC3B,4BAA0B;AACxBE,IAAAA,IAAI,EAAE;AAAEC,MAAAA,gBAAgB,EAAE;AAApB,KADkB;AAExBC,IAAAA,EAAE,EAAE;AAAED,MAAAA,gBAAgB,EAAE;AAApB;AAFoB,GADC;AAK3BE,EAAAA,YAAY,EAAE;AACZC,IAAAA,MAAM,EAAE,CADI;AAEZC,IAAAA,UAAU,EAAE,eAFA;AAGZ,qBAAiB;AACfD,MAAAA,MAAM,EAAE;AADO,KAHL;AAMZ,2BAAuB;AACrBE,MAAAA,OAAO,EAAE;AADY,KANX;AASZ,iCAA6B;AAC3BA,MAAAA,OAAO,EAAE;AADkB,KATjB;AAYZ,cAAU;AACRC,MAAAA,YAAY,EAAE,oBADN;AAERC,MAAAA,WAAW,EAAE,CAFL;AAGRC,MAAAA,MAAM,EAAE,MAHA;AAIRC,MAAAA,IAAI,EAAE,MAJE;AAKRC,MAAAA,eAAe,EAAE,CALT;AAMRC,MAAAA,aAAa,EAAE,cANP;AAORC,MAAAA,iBAAiB,EAAE,IAPX;AAQRC,MAAAA,uBAAuB,EAAE,QARjB;AASRC,MAAAA,uBAAuB,EAAE,UATjB;AAURC,MAAAA,kBAAkB,EAAE;AAVZ;AAZE;AALa,CAAD,CAA5B;AAgCA,OAAO,MAAMC,YAAY,GAAG,CAAC;AAC3BC,EAAAA,WAD2B;AAE3BC,EAAAA,eAF2B;AAG3BC,EAAAA,eAH2B;AAI3BC,EAAAA,iBAJ2B;AAK3BC,EAAAA,gBAL2B;AAM3BC,EAAAA,cAN2B;AAO3BC,EAAAA,MAAM,EAAEC,CAPmB;AAQ3BC,EAAAA;AAR2B,CAAD,KAkBtB;AACJ,QAAMC,OAAO,GAAG5B,SAAS,EAAzB;AACA,MAAI,CAAC2B,IAAI,CAACE,CAAN,IAAWF,IAAI,CAACE,CAAL,KAAWC,QAA1B,EAAoC,OAAO,IAAP;AACpC,MAAI,CAACH,IAAI,CAACI,CAAN,IAAWJ,IAAI,CAACI,CAAL,KAAWD,QAA1B,EAAoC,OAAO,IAAP;AACpC,MAAIJ,CAAC,CAACM,UAAN,EAAkB,OAAO,IAAP;AAElB,QAAMC,WAAW,GACfP,CAAC,CAACQ,IAAF,KAAW,OAAX,GACI;AACEC,IAAAA,IAAI,EAAER,IAAI,CAACS,CAAL,GAAST,IAAI,CAACE,CAAL,GAAS,CAAlB,GAAsB,EAD9B;AAEEQ,IAAAA,GAAG,EAAEV,IAAI,CAACW,CAAL,GAASX,IAAI,CAACI,CAAL,GAAS,CAAlB,GAAsB,EAF7B;AAGEQ,IAAAA,KAAK,EAAE,EAHT;AAIEC,IAAAA,MAAM,EAAE;AAJV,GADJ,GAOI;AACEL,IAAAA,IAAI,EAAER,IAAI,CAACS,CAAL,GAAS,CADjB;AAEEC,IAAAA,GAAG,EAAEV,IAAI,CAACW,CAAL,GAAS,CAFhB;AAGEC,IAAAA,KAAK,EAAEZ,IAAI,CAACE,CAAL,GAAS,EAHlB;AAIEW,IAAAA,MAAM,EAAEb,IAAI,CAACI,CAAL,GAAS;AAJnB,GARN;AAeA,QAAMU,KAAK,GACTf,CAAC,CAACQ,IAAF,KAAW,OAAX,mBACaD,WAAW,CAACM,KAAZ,GAAoB,CADjC,gBACwCN,WAAW,CAACM,KAAZ,GAAoB,CAD5D,cAEMN,WAAW,CAACO,MAAZ,GAAqB,CAF3B,gBAGUP,WAAW,CAACO,MAAZ,GAAqB,CAH/B,yBAIab,IAAI,CAACE,CAAL,GAAS,CAJtB,iBAI8BF,IAAI,CAACE,CAAL,GAAS,CAJvC,cAI4CF,IAAI,CAACI,CAAL,GAAS,CAJrD,iBAI6DJ,IAAI,CAACI,CAAL,GAAS,CAJtE,OADF;AAOA,sBACE;AACE,IAAA,GAAG,EAAEL,CAAC,CAACgB,EADT;AAEE,IAAA,SAAS,EAAE5C,UAAU,CAAC8B,OAAO,CAACxB,YAAT,EAAuB;AAC1CuC,MAAAA,WAAW,EAAEjB,CAAC,CAACiB;AAD2B,KAAvB;AAFvB,KAKMxB,WALN,EAMO,CAACE,eAAD,IAAoB,CAACD,eAArB,GACD;AACEwB,IAAAA,WAAW,EAAGC,CAAD,IAAO;AAClB,UACE,CAACnB,CAAC,CAACoB,MAAH,IACApB,CAAC,CAACQ,IAAF,KAAW,OADX,IAEAR,CAAC,CAACiB,WAFF,IAGAE,CAAC,CAACE,MAAF,KAAa,CAJf,EAKE;AACA,eAAOxB,gBAAgB,CAACG,CAAD,CAAvB;AACD;;AACD,UAAImB,CAAC,CAACE,MAAF,KAAa,CAAb,IAAkB,CAACzB,iBAAvB,EAA0C,OAAOE,cAAc,CAACE,CAAD,CAArB;AAC1CP,MAAAA,WAAW,CAACyB,WAAZ,CAAwBC,CAAxB;AACD;AAZH,GADC,GAeD,EArBN;AAsBE,IAAA,KAAK,kCACCnB,CAAC,CAACiB,WAAF,GACA;AACEK,MAAAA,aAAa,EAAEtB,CAAC,CAACQ,IAAF,KAAW,OAAX,GAAqB,MAArB,GAA8Be,SAD/C;AAEEC,MAAAA,MAAM,EAAE;AAFV,KADA,GAKA;AACEA,MAAAA,MAAM,EAAE,EAAE7B,eAAe,IAAID,eAAnB,IAAsCE,iBAAxC,IACJ,SADI,GAEJ2B,SAHN;AAIED,MAAAA,aAAa,EACX3B,eAAe,IACfD,eADA,IAECE,iBAAiB,IAAI,CAACI,CAAC,CAACiB,WAFzB,GAGI,MAHJ,GAIIM;AATR,KAND;AAiBHE,MAAAA,QAAQ,EAAE;AAjBP,OAkBAlB,WAlBA,CAtBP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBA2CE;AAAM,IAAA,CAAC,EAAEQ,KAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA3CF,CADF;AA+CD,CA7FM;AA+FP,eAAevB,YAAf","sourcesContent":["// @flow\n\nimport React from \"react\"\nimport classnames from \"classnames\"\nimport { makeStyles } from \"@material-ui/core/styles\"\n\nconst useStyles = makeStyles({\n  \"@keyframes borderDance\": {\n    from: { strokeDashoffset: 0 },\n    to: { strokeDashoffset: 100 },\n  },\n  highlightBox: {\n    zIndex: 2,\n    transition: \"opacity 500ms\",\n    \"&.highlighted\": {\n      zIndex: 3,\n    },\n    \"&:not(.highlighted)\": {\n      opacity: 0,\n    },\n    \"&:not(.highlighted):hover\": {\n      opacity: 0.6,\n    },\n    \"& path\": {\n      vectorEffect: \"non-scaling-stroke\",\n      strokeWidth: 2,\n      stroke: \"#FFF\",\n      fill: \"none\",\n      strokeDasharray: 5,\n      animationName: \"$borderDance\",\n      animationDuration: \"4s\",\n      animationTimingFunction: \"linear\",\n      animationIterationCount: \"infinite\",\n      animationPlayState: \"running\",\n    },\n  },\n})\n\nexport const HighlightBox = ({\n  mouseEvents,\n  dragWithPrimary,\n  zoomWithPrimary,\n  createWithPrimary,\n  onBeginMovePoint,\n  onSelectRegion,\n  region: r,\n  pbox,\n}: {\n  mouseEvents: any,\n  dragWithPrimary: boolean,\n  zoomWithPrimary: boolean,\n  createWithPrimary: boolean,\n  onBeginMovePoint: Function,\n  onSelectRegion: Function,\n  region: any,\n  pbox: { x: number, y: number, w: number, h: number },\n}) => {\n  const classes = useStyles()\n  if (!pbox.w || pbox.w === Infinity) return null\n  if (!pbox.h || pbox.h === Infinity) return null\n  if (r.unfinished) return null\n\n  const styleCoords =\n    r.type === \"point\"\n      ? {\n          left: pbox.x + pbox.w / 2 - 30,\n          top: pbox.y + pbox.h / 2 - 30,\n          width: 60,\n          height: 60,\n        }\n      : {\n          left: pbox.x - 5,\n          top: pbox.y - 5,\n          width: pbox.w + 10,\n          height: pbox.h + 10,\n        }\n\n  const pathD =\n    r.type === \"point\"\n      ? `M5,5 L${styleCoords.width - 5} 5L${styleCoords.width - 5} ${\n          styleCoords.height - 5\n        }L5 ${styleCoords.height - 5}Z`\n      : `M5,5 L${pbox.w + 5},5 L${pbox.w + 5},${pbox.h + 5} L5,${pbox.h + 5} Z`\n\n  return (\n    <svg\n      key={r.id}\n      className={classnames(classes.highlightBox, {\n        highlighted: r.highlighted,\n      })}\n      {...mouseEvents}\n      {...(!zoomWithPrimary && !dragWithPrimary\n        ? {\n            onMouseDown: (e) => {\n              if (\n                !r.locked &&\n                r.type === \"point\" &&\n                r.highlighted &&\n                e.button === 0\n              ) {\n                return onBeginMovePoint(r)\n              }\n              if (e.button === 0 && !createWithPrimary) return onSelectRegion(r)\n              mouseEvents.onMouseDown(e)\n            },\n          }\n        : {})}\n      style={{\n        ...(r.highlighted\n          ? {\n              pointerEvents: r.type !== \"point\" ? \"none\" : undefined,\n              cursor: \"grab\",\n            }\n          : {\n              cursor: !(zoomWithPrimary || dragWithPrimary || createWithPrimary)\n                ? \"pointer\"\n                : undefined,\n              pointerEvents:\n                zoomWithPrimary ||\n                dragWithPrimary ||\n                (createWithPrimary && !r.highlighted)\n                  ? \"none\"\n                  : undefined,\n            }),\n        position: \"absolute\",\n        ...styleCoords,\n      }}\n    >\n      <path d={pathD} />\n    </svg>\n  )\n}\n\nexport default HighlightBox\n"]},"metadata":{},"sourceType":"module"}