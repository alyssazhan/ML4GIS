{"ast":null,"code":"var _jsxFileName = \"/Users/yan/Documents/proj/ML4GIS/client/src/pages/Home/annotateComponents/RegionShapes/index.js\";\nimport React, { memo } from \"react\";\nimport colorAlpha from \"color-alpha\";\n\nfunction clamp(num, min, max) {\n  return num <= min ? min : num >= max ? max : num;\n}\n\nconst RegionComponents = {\n  point: memo(({\n    region,\n    iw,\n    ih\n  }) => /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(\".concat(region.x * iw, \" \").concat(region.y * ih, \")\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 8L8 0L0 -8L-8 0Z\",\n    strokeWidth: 2,\n    stroke: region.color,\n    fill: \"transparent\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 7\n    }\n  }))),\n  rectangle: memo(({\n    region,\n    iw,\n    ih\n  }) => /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(\".concat(region.x * iw, \" \").concat(region.y * ih, \")\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    strokeWidth: 2,\n    x: 0,\n    y: 0,\n    width: Math.max(region.w * iw, 0),\n    height: Math.max(region.h * ih, 0),\n    stroke: colorAlpha(region.color, 0.75),\n    fill: colorAlpha(region.color, 0.25),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 7\n    }\n  }))),\n  polygon: memo(({\n    region,\n    iw,\n    ih,\n    fullSegmentationMode\n  }) => {\n    const Component = region.open ? \"polyline\" : \"polygon\";\n    return /*#__PURE__*/React.createElement(Component, {\n      points: region.points.map(([x, y]) => [x * iw, y * ih]).map(a => a.join(\" \")).join(\" \"),\n      strokeWidth: 2,\n      stroke: colorAlpha(region.color, 0.75),\n      fill: colorAlpha(region.color, 0.25),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 7\n      }\n    });\n  }),\n  pixel: () => null\n};\nexport const WrappedRegionList = memo(({\n  regions,\n  keypointDefinitions,\n  iw,\n  ih,\n  fullSegmentationMode\n}) => {\n  return regions.filter(r => r.visible !== false).map(r => {\n    const Component = RegionComponents[r.type];\n    return /*#__PURE__*/React.createElement(Component, {\n      key: r.regionId,\n      region: r,\n      iw: iw,\n      ih: ih,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }\n    });\n  });\n}, (n, p) => n.regions === p.regions && n.iw === p.iw && n.ih === p.ih);\nexport const RegionShapes = ({\n  mat,\n  imagePosition,\n  regions = []\n}) => {\n  const iw = imagePosition.bottomRight.x - imagePosition.topLeft.x;\n  const ih = imagePosition.bottomRight.y - imagePosition.topLeft.y;\n  if (isNaN(iw) || isNaN(ih)) return null;\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    width: iw,\n    height: ih,\n    style: {\n      position: \"absolute\",\n      zIndex: 2,\n      left: imagePosition.topLeft.x,\n      top: imagePosition.topLeft.y,\n      pointerEvents: \"none\",\n      width: iw,\n      height: ih\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(WrappedRegionList, {\n    key: \"wrapped-region-list\",\n    regions: regions,\n    iw: iw,\n    ih: ih,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }));\n};\nexport default RegionShapes;","map":{"version":3,"sources":["/Users/yan/Documents/proj/ML4GIS/client/src/pages/Home/annotateComponents/RegionShapes/index.js"],"names":["React","memo","colorAlpha","clamp","num","min","max","RegionComponents","point","region","iw","ih","x","y","color","rectangle","Math","w","h","polygon","fullSegmentationMode","Component","open","points","map","a","join","pixel","WrappedRegionList","regions","keypointDefinitions","filter","r","visible","type","regionId","n","p","RegionShapes","mat","imagePosition","bottomRight","topLeft","isNaN","position","zIndex","left","top","pointerEvents","width","height"],"mappings":"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","sourcesContent":["\nimport React, { memo } from \"react\"\nimport colorAlpha from \"color-alpha\"\n\nfunction clamp(num, min, max) {\n  return num <= min ? min : num >= max ? max : num\n}\n\nconst RegionComponents = {\n  point: memo(({ region, iw, ih }) => (\n    <g transform={`translate(${region.x * iw} ${region.y * ih})`}>\n      <path\n        d={\"M0 8L8 0L0 -8L-8 0Z\"}\n        strokeWidth={2}\n        stroke={region.color}\n        fill=\"transparent\"\n      />\n    </g>\n  )),\n    rectangle: memo(({ region, iw, ih }) => (\n    <g transform={`translate(${region.x * iw} ${region.y * ih})`}>\n      <rect\n        strokeWidth={2}\n        x={0}\n        y={0}\n        width={Math.max(region.w * iw, 0)}\n        height={Math.max(region.h * ih, 0)}\n        stroke={colorAlpha(region.color, 0.75)}\n        fill={colorAlpha(region.color, 0.25)}\n      />\n    </g>\n  )),\n  polygon: memo(({ region, iw, ih, fullSegmentationMode }) => {\n    const Component = region.open ? \"polyline\" : \"polygon\"\n    return (\n      <Component\n        points={region.points\n          .map(([x, y]) => [x * iw, y * ih])\n          .map((a) => a.join(\" \"))\n          .join(\" \")}\n        strokeWidth={2}\n        stroke={colorAlpha(region.color, 0.75)}\n        fill={colorAlpha(region.color, 0.25)}\n      />\n    )\n  }),\n  pixel: () => null,\n}\n\nexport const WrappedRegionList = memo(\n  ({ regions, keypointDefinitions, iw, ih, fullSegmentationMode }) => {\n    return regions\n      .filter((r) => r.visible !== false)\n      .map((r) => {\n        const Component = RegionComponents[r.type]\n        return (\n          <Component\n            key={r.regionId}\n            region={r}\n            iw={iw}\n            ih={ih}\n          />\n        )\n      })\n  },\n  (n, p) => n.regions === p.regions && n.iw === p.iw && n.ih === p.ih\n)\n\nexport const RegionShapes = ({\n  mat,\n  imagePosition,\n  regions = [],\n}) => {\n  const iw = imagePosition.bottomRight.x - imagePosition.topLeft.x\n  const ih = imagePosition.bottomRight.y - imagePosition.topLeft.y\n  if (isNaN(iw) || isNaN(ih)) return null\n  return (\n    <svg\n      width={iw}\n      height={ih}\n      style={{\n        position: \"absolute\",\n        zIndex: 2,\n        left: imagePosition.topLeft.x,\n        top: imagePosition.topLeft.y,\n        pointerEvents: \"none\",\n        width: iw,\n        height: ih,\n      }}\n    >\n      <WrappedRegionList\n        key=\"wrapped-region-list\"\n        regions={regions}\n        iw={iw}\n        ih={ih}\n      />\n    </svg>\n  )\n}\n\nexport default RegionShapes\n"]},"metadata":{},"sourceType":"module"}