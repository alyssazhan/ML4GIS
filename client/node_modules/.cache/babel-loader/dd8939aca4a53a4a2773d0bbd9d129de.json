{"ast":null,"code":"import _objectSpread from\"D:\\\\GitHub\\\\ML4GIS\\\\client\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"D:\\\\GitHub\\\\ML4GIS\\\\client\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"D:\\\\GitHub\\\\ML4GIS\\\\client\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useRef,useState,useLayoutEffect,useEffect,useMemo}from\"react\";import{Matrix}from\"transformation-matrix-js\";import{makeStyles}from\"@material-ui/core/styles\";import styles from\"./styles_ImageCanvas\";import useMouse from\"./useMouse\";import useProjectRegionBox from\"./useProjectBox\";import{useRafState}from\"react-use\";import RegionTags from\"../RegionTags/main_RegionTags\";import RegionSelectAndTransformBoxes from\"../TransformBoxes/main_TransformBoxes\";import ImageCanvasBackground from\"./background\";import useEventCallback from\"use-event-callback\";import RegionShapes from\"../RegionShapes/main_RegionShapes\";// get style from style.js\nvar myStyle=makeStyles(styles);var getCanvasDimension=function getCanvasDimension(){var allowedArea=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},iw=_ref.iw,ih=_ref.ih;var dimension=Matrix.from(1,0,0,1,-10,-10);if(allowedArea&&iw){dimension=dimension.translate(allowedArea.x*iw,allowedArea.y*ih).scaleU(allowedArea.w+0.05);}return dimension;};export var ImageCanvas=function ImageCanvas(_ref2){var regions=_ref2.regions,imageSrc=_ref2.imageSrc,_ref2$onMouseMove=_ref2.onMouseMove,onMouseMove=_ref2$onMouseMove===void 0?function(p){return null;}:_ref2$onMouseMove,_ref2$onMouseDown=_ref2.onMouseDown,onMouseDown=_ref2$onMouseDown===void 0?function(p){return null;}:_ref2$onMouseDown,_ref2$onMouseUp=_ref2.onMouseUp,onMouseUp=_ref2$onMouseUp===void 0?function(p){return null;}:_ref2$onMouseUp,_ref2$dragWithPrimary=_ref2.dragWithPrimary,dragWithPrimary=_ref2$dragWithPrimary===void 0?false:_ref2$dragWithPrimary,_ref2$zoomWithPrimary=_ref2.zoomWithPrimary,zoomWithPrimary=_ref2$zoomWithPrimary===void 0?false:_ref2$zoomWithPrimary,_ref2$createWithPrima=_ref2.createWithPrimary,createWithPrimary=_ref2$createWithPrima===void 0?false:_ref2$createWithPrima,regionTagList=_ref2.regionTagList,allowedArea=_ref2.allowedArea,onLoaded=_ref2.onLoaded,onChangeRegion=_ref2.onChangeRegion,onBeginRegionEdit=_ref2.onBeginRegionEdit,onCloseRegionEdit=_ref2.onCloseRegionEdit,onBeginBoxTransform=_ref2.onBeginBoxTransform,onBeginMovePolygonPoint=_ref2.onBeginMovePolygonPoint,onAddPolygonPoint=_ref2.onAddPolygonPoint,onBeginMovePolygon1Point=_ref2.onBeginMovePolygon1Point,onAddPolygon1Point=_ref2.onAddPolygon1Point,onBeginMoveKeypoint=_ref2.onBeginMoveKeypoint,onSelectRegion=_ref2.onSelectRegion,onBeginMovePoint=_ref2.onBeginMovePoint,onDeleteRegion=_ref2.onDeleteRegion,onRegionClassAdded=_ref2.onRegionClassAdded,_ref2$zoomOnAllowedAr=_ref2.zoomOnAllowedArea,zoomOnAllowedArea=_ref2$zoomOnAllowedAr===void 0?true:_ref2$zoomOnAllowedAr,allowComments=_ref2.allowComments,nBeginCircleTransform=_ref2.nBeginCircleTransform;var classes=myStyle();var canvasEl=useRef(null);var layoutParams=useRef({});var _useRafState=useRafState(false),_useRafState2=_slicedToArray(_useRafState,2),dragging=_useRafState2[0],changeDragging=_useRafState2[1];var _useRafState3=useRafState(null),_useRafState4=_slicedToArray(_useRafState3,2),zoomStart=_useRafState4[0],changeZoomStart=_useRafState4[1];var _useRafState5=useRafState(null),_useRafState6=_slicedToArray(_useRafState5,2),zoomEnd=_useRafState6[0],changeZoomEnd=_useRafState6[1];var _useRafState7=useRafState(getCanvasDimension()),_useRafState8=_slicedToArray(_useRafState7,2),mat=_useRafState8[0],changeMat=_useRafState8[1];var _useMouse=useMouse({canvasEl:canvasEl,dragging:dragging,mat:mat,layoutParams:layoutParams,changeMat:changeMat,zoomStart:zoomStart,zoomEnd:zoomEnd,changeZoomStart:changeZoomStart,changeZoomEnd:changeZoomEnd,changeDragging:changeDragging,zoomWithPrimary:zoomWithPrimary,dragWithPrimary:dragWithPrimary,onMouseMove:onMouseMove,onMouseDown:onMouseDown,onMouseUp:onMouseUp}),mouseEvents=_useMouse.mouseEvents,mousePosition=_useMouse.mousePosition;var projectRegionBox=useProjectRegionBox({layoutParams:layoutParams,mat:mat});var _useState=useState(),_useState2=_slicedToArray(_useState,2),imageDimensions=_useState2[0],changeImageDimensions=_useState2[1];var imageLoaded=Boolean(imageDimensions&&imageDimensions.naturalWidth);var ImageLoaded=useEventCallback(function(_ref3){var naturalWidth=_ref3.naturalWidth,naturalHeight=_ref3.naturalHeight;var dims={naturalWidth:naturalWidth,naturalHeight:naturalHeight};if(onLoaded)onLoaded(dims);changeImageDimensions(dims);});var canvas=canvasEl.current;if(canvas&&imageLoaded){var clientWidth=canvas.clientWidth,clientHeight=canvas.clientHeight;var fitScale=Math.max(imageDimensions.naturalWidth/(clientWidth-20),imageDimensions.naturalHeight/(clientHeight-20));var _iw=imageDimensions.naturalWidth/fitScale,_ih=imageDimensions.naturalHeight/fitScale;layoutParams.current={iw:_iw,ih:_ih,fitScale:fitScale,canvasWidth:clientWidth,canvasHeight:clientHeight};}useEffect(function(){if(!imageLoaded)return;changeMat(getCanvasDimension(zoomOnAllowedArea?allowedArea:null,layoutParams.current));},[imageLoaded]);useLayoutEffect(function(){if(!imageDimensions)return;var clientWidth=canvas.clientWidth,clientHeight=canvas.clientHeight;canvas.width=clientWidth;canvas.height=clientHeight;var context=canvas.getContext(\"2d\");context.save();context.transform.apply(context,_toConsumableArray(mat.clone().inverse().toArray()));var _layoutParams$current=layoutParams.current,iw=_layoutParams$current.iw,ih=_layoutParams$current.ih;if(allowedArea){// Pattern to indicate the NOT allowed areas\nvar x=allowedArea.x,y=allowedArea.y,w=allowedArea.w,h=allowedArea.h;context.save();context.globalAlpha=1;var outer=[[0,0],[iw,0],[iw,ih],[0,ih]];var inner=[[x*iw,y*ih],[x*iw+w*iw,y*ih],[x*iw+w*iw,y*ih+h*ih],[x*iw,y*ih+h*ih]];context.moveTo.apply(context,_toConsumableArray(outer[0]));outer.forEach(function(p){return context.lineTo.apply(context,_toConsumableArray(p));});context.lineTo.apply(context,_toConsumableArray(outer[0]));context.closePath();inner.reverse();context.moveTo.apply(context,_toConsumableArray(inner[0]));inner.forEach(function(p){return context.lineTo.apply(context,_toConsumableArray(p));});context.lineTo.apply(context,_toConsumableArray(inner[0]));context.fill();context.restore();}context.restore();});var _layoutParams$current2=layoutParams.current,iw=_layoutParams$current2.iw,ih=_layoutParams$current2.ih;var zoomBox=!zoomStart||!zoomEnd?null:_objectSpread(_objectSpread({},mat.clone().inverse().applyToPoint(zoomStart.x,zoomStart.y)),{},{w:(zoomEnd.x-zoomStart.x)/mat.a,h:(zoomEnd.y-zoomStart.y)/mat.d});if(zoomBox){if(zoomBox.w<0){zoomBox.x+=zoomBox.w;zoomBox.w*=-1;}if(zoomBox.h<0){zoomBox.y+=zoomBox.h;zoomBox.h*=-1;}}var imagePosition={topLeft:mat.clone().inverse().applyToPoint(0,0),bottomRight:mat.clone().inverse().applyToPoint(iw,ih)};return/*#__PURE__*/React.createElement(\"div\",{style:{width:\"100%\",height:\"100%\",maxHeight:\"calc(100vh - 68px)\",position:\"relative\",overflow:\"hidden\",cursor:createWithPrimary?\"crosshair\":dragging?\"grabbing\":dragWithPrimary?\"grab\":zoomWithPrimary?mat.a<1?\"zoom-out\":\"zoom-in\":undefined}},imageLoaded&&!dragging&&/*#__PURE__*/React.createElement(RegionSelectAndTransformBoxes,{key:\"regionSelectAndTransformBoxes\",regions:!allowedArea?regions:[{type:\"rectangle\",id:\"$$allowed_area\",cls:\"allowed_area\",highlighted:true,x:allowedArea.x,y:allowedArea.y,w:allowedArea.w,h:allowedArea.h,visible:true,color:\"#ff0\"}],mouseEvents:mouseEvents,projectRegionBox:projectRegionBox,dragWithPrimary:dragWithPrimary,createWithPrimary:createWithPrimary,zoomWithPrimary:zoomWithPrimary,onBeginMovePoint:onBeginMovePoint,onSelectRegion:onSelectRegion,layoutParams:layoutParams,mat:mat,onBeginBoxTransform:onBeginBoxTransform,onBeginMovePolygonPoint:onBeginMovePolygonPoint,onBeginMoveKeypoint:onBeginMoveKeypoint,onAddPolygonPoint:onAddPolygonPoint,onAddPolygon1Point:onAddPolygon1Point,onBeginMovePolygon1Point:onBeginMovePolygon1Point}),imageLoaded&&!dragging&&/*#__PURE__*/React.createElement(\"div\",{key:\"regionTags\"},/*#__PURE__*/React.createElement(RegionTags,{regions:regions,projectRegionBox:projectRegionBox,mouseEvents:mouseEvents,regionTagList:regionTagList,onBeginRegionEdit:onBeginRegionEdit,onChangeRegion:onChangeRegion,onCloseRegionEdit:onCloseRegionEdit,onDeleteRegion:onDeleteRegion,layoutParams:layoutParams,imageSrc:imageSrc,onRegionClassAdded:onRegionClassAdded,allowComments:allowComments})),zoomWithPrimary&&zoomBox!==null&&/*#__PURE__*/React.createElement(\"div\",{key:\"zoomBox\",style:{position:\"absolute\",zIndex:1,border:\"1px solid #fff\",pointerEvents:\"none\",left:zoomBox.x,top:zoomBox.y,width:zoomBox.w,height:zoomBox.h}}),/*#__PURE__*/React.createElement(\"div\",Object.assign({style:{width:\"100%\",height:\"100%\"}},mouseEvents),/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"canvas\",{style:{opacity:0.25},className:classes.canvas,ref:canvasEl}),/*#__PURE__*/React.createElement(RegionShapes,{imagePosition:imagePosition,regions:regions}),/*#__PURE__*/React.createElement(ImageCanvasBackground,{imagePosition:imagePosition,mouseEvents:mouseEvents,onLoad:ImageLoaded,imageSrc:imageSrc}))),/*#__PURE__*/React.createElement(\"div\",{className:classes.zoomIndicator},(1/mat.a*100).toFixed(0),\"%\"));};export default ImageCanvas;","map":{"version":3,"sources":["D:/GitHub/ML4GIS/client/src/pages/Home/annotateComponents/ImageCanvas/main_ImageCanvas.js"],"names":["React","useRef","useState","useLayoutEffect","useEffect","useMemo","Matrix","makeStyles","styles","useMouse","useProjectRegionBox","useRafState","RegionTags","RegionSelectAndTransformBoxes","ImageCanvasBackground","useEventCallback","RegionShapes","myStyle","getCanvasDimension","allowedArea","iw","ih","dimension","from","translate","x","y","scaleU","w","ImageCanvas","regions","imageSrc","onMouseMove","p","onMouseDown","onMouseUp","dragWithPrimary","zoomWithPrimary","createWithPrimary","regionTagList","onLoaded","onChangeRegion","onBeginRegionEdit","onCloseRegionEdit","onBeginBoxTransform","onBeginMovePolygonPoint","onAddPolygonPoint","onBeginMovePolygon1Point","onAddPolygon1Point","onBeginMoveKeypoint","onSelectRegion","onBeginMovePoint","onDeleteRegion","onRegionClassAdded","zoomOnAllowedArea","allowComments","nBeginCircleTransform","classes","canvasEl","layoutParams","dragging","changeDragging","zoomStart","changeZoomStart","zoomEnd","changeZoomEnd","mat","changeMat","mouseEvents","mousePosition","projectRegionBox","imageDimensions","changeImageDimensions","imageLoaded","Boolean","naturalWidth","ImageLoaded","naturalHeight","dims","canvas","current","clientWidth","clientHeight","fitScale","Math","max","canvasWidth","canvasHeight","width","height","context","getContext","save","transform","clone","inverse","toArray","h","globalAlpha","outer","inner","moveTo","forEach","lineTo","closePath","reverse","fill","restore","zoomBox","applyToPoint","a","d","imagePosition","topLeft","bottomRight","maxHeight","position","overflow","cursor","undefined","type","id","cls","highlighted","visible","color","zIndex","border","pointerEvents","left","top","opacity","zoomIndicator","toFixed"],"mappings":"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","sourcesContent":["import React, {\r\n  useRef,\r\n  useState,\r\n  useLayoutEffect,\r\n  useEffect,\r\n  useMemo,\r\n} from \"react\"\r\nimport { Matrix } from \"transformation-matrix-js\"\r\nimport type {\r\n  Region,\r\n  Point,\r\n  Polygon,\r\n  Polygon1,\r\n  Rectangle,\r\n  Circle\r\n} from \"./regionTools.js\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport styles from \"./styles_ImageCanvas\"\r\nimport useMouse from \"./useMouse\"\r\nimport useProjectRegionBox from \"./useProjectBox\"\r\nimport { useRafState } from \"react-use\"\r\nimport RegionTags from \"../RegionTags/main_RegionTags\"\r\nimport RegionSelectAndTransformBoxes from \"../TransformBoxes/main_TransformBoxes\"\r\nimport ImageCanvasBackground from \"./background\"\r\nimport useEventCallback from \"use-event-callback\"\r\nimport RegionShapes from \"../RegionShapes/main_RegionShapes\"\r\n\r\n// get style from style.js\r\nconst myStyle = makeStyles(styles)\r\n\r\ntype Props = {\r\n  regions: Array<Region>,\r\n  imageSrc?: string,\r\n  onMouseMove?: ({ x: number, y: number }) => any,\r\n  onMouseDown?: ({ x: number, y: number }) => any,\r\n  onMouseUp?: ({ x: number, y: number }) => any,\r\n  dragWithPrimary?: boolean,\r\n  zoomWithPrimary?: boolean,\r\n  createWithPrimary?: boolean,\r\n  realSize?: { width: number, height: number, unitName: string },\r\n  regionTagList?: Array<string>,\r\n  allowedArea?: { x: number, y: number, w: number, h: number },\r\n  allowComments?: Boolean,\r\n  onChangeRegion: (Region) => any,\r\n  onBeginRegionEdit: (Region) => any,\r\n  onCloseRegionEdit: (Region) => any,\r\n  onDeleteRegion: (Region) => any,\r\n  onBeginBoxTransform: (Rectangle, [number, number]) => any,\r\n  onBeginMovePolygonPoint: (Polygon, index: number) => any,\r\n  onAddPolygonPoint: (Polygon, point: [number, number], index: number) => any,\r\n  onBeginMovePolygon1Point: (Polygon1, index1: number) => any,\r\n  onAddPolygon1Point: (Polygon1, Polygon1Index:number, point1: [number, number], index1: number) => any,\r\n  onBeginCircleTransform: (Circle, directions: string) => any,\r\n  onSelectRegion: (Region) => any,\r\n  onBeginMovePoint: (Point) => any,\r\n  onLoaded: ({\r\n    naturalWidth: number,\r\n    naturalHeight: number,\r\n  }) => any,\r\n  onRegionClassAdded: () => {},\r\n}\r\nconst getCanvasDimension = (allowedArea = null, { iw, ih } = {}) => {\r\n  let dimension = Matrix.from(1, 0, 0, 1, -10, -10)\r\n  if (allowedArea && iw) {\r\n    dimension = dimension\r\n      .translate(allowedArea.x * iw, allowedArea.y * ih)\r\n      .scaleU(allowedArea.w + 0.05)\r\n  }\r\n  return dimension\r\n}\r\n\r\nexport const ImageCanvas = ({\r\n  regions,\r\n  imageSrc,\r\n  onMouseMove = (p) => null,\r\n  onMouseDown = (p) => null,\r\n  onMouseUp = (p) => null,\r\n  dragWithPrimary = false,\r\n  zoomWithPrimary = false,\r\n  createWithPrimary = false,\r\n  regionTagList,\r\n  allowedArea,\r\n  onLoaded,\r\n  onChangeRegion,\r\n  onBeginRegionEdit,\r\n  onCloseRegionEdit,\r\n  onBeginBoxTransform,\r\n  onBeginMovePolygonPoint,\r\n  onAddPolygonPoint,\r\n  onBeginMovePolygon1Point,\r\n  onAddPolygon1Point,\r\n  onBeginMoveKeypoint,\r\n  onSelectRegion,\r\n  onBeginMovePoint,\r\n  onDeleteRegion,\r\n  onRegionClassAdded,\r\n  zoomOnAllowedArea = true,\r\n  allowComments,\r\nnBeginCircleTransform,\r\n}: Props) => {\r\n  const classes = myStyle()\r\n\r\n  const canvasEl = useRef(null)\r\n  const layoutParams = useRef({})\r\n  const [dragging, changeDragging] = useRafState(false)\r\n  const [zoomStart, changeZoomStart] = useRafState(null)\r\n  const [zoomEnd, changeZoomEnd] = useRafState(null)\r\n  const [mat, changeMat] = useRafState(getCanvasDimension())\r\n\r\n  const { mouseEvents, mousePosition } = useMouse({\r\n    canvasEl,\r\n    dragging,\r\n    mat,\r\n    layoutParams,\r\n    changeMat,\r\n    zoomStart,\r\n    zoomEnd,\r\n    changeZoomStart,\r\n    changeZoomEnd,\r\n    changeDragging,\r\n    zoomWithPrimary,\r\n    dragWithPrimary,\r\n    onMouseMove,\r\n    onMouseDown,\r\n    onMouseUp,\r\n  })\r\n\r\n\r\n\r\n  const projectRegionBox = useProjectRegionBox({ layoutParams, mat })\r\n\r\n  const [imageDimensions, changeImageDimensions] = useState()\r\n  const imageLoaded = Boolean(imageDimensions && imageDimensions.naturalWidth)\r\n\r\n  const ImageLoaded = useEventCallback(\r\n    ({ naturalWidth, naturalHeight}) => {\r\n      const dims = { naturalWidth, naturalHeight}\r\n      if (onLoaded) onLoaded(dims)\r\n      changeImageDimensions(dims)\r\n\r\n    }\r\n  )\r\n  const canvas = canvasEl.current\r\n  if (canvas && imageLoaded) {\r\n    const { clientWidth, clientHeight } = canvas\r\n\r\n    const fitScale = Math.max(\r\n      imageDimensions.naturalWidth / (clientWidth - 20),\r\n      imageDimensions.naturalHeight / (clientHeight - 20)\r\n    )\r\n\r\n    const [iw, ih] = [\r\n      imageDimensions.naturalWidth / fitScale,\r\n      imageDimensions.naturalHeight / fitScale,\r\n    ]\r\n\r\n    layoutParams.current = {\r\n      iw,\r\n      ih,\r\n      fitScale,\r\n      canvasWidth: clientWidth,\r\n      canvasHeight: clientHeight,\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!imageLoaded) return\r\n    changeMat(\r\n        getCanvasDimension(\r\n        zoomOnAllowedArea ? allowedArea : null,\r\n        layoutParams.current\r\n      )\r\n    )\r\n  }, [imageLoaded])\r\n\r\n  useLayoutEffect(() => {\r\n    if (!imageDimensions) return\r\n    const { clientWidth, clientHeight } = canvas\r\n    canvas.width = clientWidth\r\n    canvas.height = clientHeight\r\n    const context = canvas.getContext(\"2d\")\r\n\r\n    context.save()\r\n    context.transform(...mat.clone().inverse().toArray())\r\n\r\n    const { iw, ih } = layoutParams.current\r\n\r\n    if (allowedArea) {\r\n      // Pattern to indicate the NOT allowed areas\r\n      const { x, y, w, h } = allowedArea\r\n      context.save()\r\n      context.globalAlpha = 1\r\n      const outer = [\r\n        [0, 0],\r\n        [iw, 0],\r\n        [iw, ih],\r\n        [0, ih],\r\n      ]\r\n      const inner = [\r\n        [x * iw, y * ih],\r\n        [x * iw + w * iw, y * ih],\r\n        [x * iw + w * iw, y * ih + h * ih],\r\n        [x * iw, y * ih + h * ih],\r\n      ]\r\n      context.moveTo(...outer[0])\r\n      outer.forEach((p) => context.lineTo(...p))\r\n      context.lineTo(...outer[0])\r\n      context.closePath()\r\n\r\n      inner.reverse()\r\n      context.moveTo(...inner[0])\r\n      inner.forEach((p) => context.lineTo(...p))\r\n      context.lineTo(...inner[0])\r\n\r\n      context.fill()\r\n\r\n      context.restore()\r\n    }\r\n\r\n    context.restore()\r\n  })\r\n\r\n  const { iw, ih } = layoutParams.current\r\n\r\n  let zoomBox =\r\n    !zoomStart || !zoomEnd\r\n      ? null\r\n      : {\r\n          ...mat.clone().inverse().applyToPoint(zoomStart.x, zoomStart.y),\r\n          w: (zoomEnd.x - zoomStart.x) / mat.a,\r\n          h: (zoomEnd.y - zoomStart.y) / mat.d,\r\n        }\r\n  if (zoomBox) {\r\n    if (zoomBox.w < 0) {\r\n      zoomBox.x += zoomBox.w\r\n      zoomBox.w *= -1\r\n    }\r\n    if (zoomBox.h < 0) {\r\n      zoomBox.y += zoomBox.h\r\n      zoomBox.h *= -1\r\n    }\r\n  }\r\n\r\n  const imagePosition = {\r\n    topLeft: mat.clone().inverse().applyToPoint(0, 0),\r\n    bottomRight: mat.clone().inverse().applyToPoint(iw, ih),\r\n  }\r\n\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        maxHeight: \"calc(100vh - 68px)\",\r\n        position: \"relative\",\r\n        overflow: \"hidden\",\r\n        cursor: createWithPrimary\r\n          ? \"crosshair\"\r\n          : dragging\r\n          ? \"grabbing\"\r\n          : dragWithPrimary\r\n          ? \"grab\"\r\n          : zoomWithPrimary\r\n          ? mat.a < 1\r\n            ? \"zoom-out\"\r\n            : \"zoom-in\"\r\n          : undefined,\r\n      }}\r\n    >\r\n      {imageLoaded && !dragging && (\r\n        <RegionSelectAndTransformBoxes\r\n          key=\"regionSelectAndTransformBoxes\"\r\n          regions={\r\n             !allowedArea\r\n              ? regions\r\n              : [\r\n                  {\r\n                    type: \"rectangle\",\r\n                    id: \"$$allowed_area\",\r\n                    cls: \"allowed_area\",\r\n                    highlighted: true,\r\n                    x: allowedArea.x,\r\n                    y: allowedArea.y,\r\n                    w: allowedArea.w,\r\n                    h: allowedArea.h,\r\n                    visible: true,\r\n                    color: \"#ff0\",\r\n                  },\r\n                ]\r\n          }\r\n          mouseEvents={mouseEvents}\r\n          projectRegionBox={projectRegionBox}\r\n          dragWithPrimary={dragWithPrimary}\r\n          createWithPrimary={createWithPrimary}\r\n          zoomWithPrimary={zoomWithPrimary}\r\n          onBeginMovePoint={onBeginMovePoint}\r\n          onSelectRegion={onSelectRegion}\r\n          layoutParams={layoutParams}\r\n          mat={mat}\r\n          onBeginBoxTransform={onBeginBoxTransform}\r\n          onBeginMovePolygonPoint={onBeginMovePolygonPoint}\r\n          onBeginMoveKeypoint={onBeginMoveKeypoint}\r\n          onAddPolygonPoint={onAddPolygonPoint}\r\n          onAddPolygon1Point={onAddPolygon1Point}\r\n          onBeginMovePolygon1Point={onBeginMovePolygon1Point}\r\n        />\r\n      )}\r\n      {imageLoaded  && !dragging && (\r\n        <div key=\"regionTags\">\r\n          <RegionTags\r\n            regions={regions}\r\n            projectRegionBox={projectRegionBox}\r\n            mouseEvents={mouseEvents}\r\n            regionTagList={regionTagList}\r\n            onBeginRegionEdit={onBeginRegionEdit}\r\n            onChangeRegion={onChangeRegion}\r\n            onCloseRegionEdit={onCloseRegionEdit}\r\n            onDeleteRegion={onDeleteRegion}\r\n            layoutParams={layoutParams}\r\n            imageSrc={imageSrc}\r\n            onRegionClassAdded={onRegionClassAdded}\r\n            allowComments={allowComments}\r\n          />\r\n       </div>\r\n      )}\r\n\r\n      {zoomWithPrimary && zoomBox !== null && (\r\n        <div\r\n          key=\"zoomBox\"\r\n          style={{\r\n            position: \"absolute\",\r\n            zIndex: 1,\r\n            border: \"1px solid #fff\",\r\n            pointerEvents: \"none\",\r\n            left: zoomBox.x,\r\n            top: zoomBox.y,\r\n            width: zoomBox.w,\r\n            height: zoomBox.h,\r\n          }}\r\n        />\r\n      )}\r\n\r\n      <div\r\n        style={{ width: \"100%\", height: \"100%\" }}\r\n        {...mouseEvents}\r\n      >\r\n\r\n        <>\r\n          <canvas\r\n            style={{ opacity: 0.25 }}\r\n            className={classes.canvas}\r\n            ref={canvasEl}\r\n          />\r\n          <RegionShapes\r\n            imagePosition={imagePosition}\r\n            regions={regions}\r\n          />\r\n          <ImageCanvasBackground\r\n            imagePosition={imagePosition}\r\n            mouseEvents={mouseEvents}\r\n            onLoad={ImageLoaded}\r\n            imageSrc={imageSrc}\r\n          />\r\n        </>\r\n      </div>\r\n      <div className={classes.zoomIndicator}>\r\n        {((1 / mat.a) * 100).toFixed(0)}%\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ImageCanvas\r\n"]},"metadata":{},"sourceType":"module"}