{"ast":null,"code":"import _objectSpread from \"/Users/yan/Documents/proj/ML4GIS/client/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/yan/Documents/proj/ML4GIS/client/src/annotateComponents/RegionLabel/index.js\";\nimport React, { useRef, memo } from \"react\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport styles from \"./styles\";\nimport classnames from \"classnames\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Button from \"@material-ui/core/Button\";\nimport TrashIcon from \"@material-ui/icons/Delete\";\nimport CheckIcon from \"@material-ui/icons/Check\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Select from \"react-select\";\nimport { asMutable } from \"seamless-immutable\";\nconst useStyles = makeStyles(styles);\nexport const RegionLabel = ({\n  region,\n  editing,\n  allowedTags,\n  onDelete,\n  onChange: _onChange,\n  onClose,\n  onOpen,\n  allowComments\n}) => {\n  const classes = useStyles();\n  const commentInputRef = useRef(null);\n\n  const onCommentInputClick = _ => {\n    // The TextField wraps the <input> tag with two divs\n    const commentInput = commentInputRef.current.children[0].children[0];\n    if (commentInput) return commentInput.focus();\n  };\n\n  return /*#__PURE__*/React.createElement(Paper, {\n    onClick: () => !editing ? onOpen(region) : null,\n    className: classnames(classes.regionInfo, {\n      highlighted: region.highlighted\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 5\n    }\n  }, !editing ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, region.cls && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"circle\",\n    style: {\n      backgroundColor: region.color\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 15\n    }\n  }), region.cls), region.tags && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tags\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }, region.tags.map(t => /*#__PURE__*/React.createElement(\"div\", {\n    key: t,\n    className: \"tag\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }, t)))) : /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: 200\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"row\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      backgroundColor: region.color || \"#888\",\n      color: \"#fff\",\n      padding: 4,\n      paddingLeft: 8,\n      paddingRight: 8,\n      borderRadius: 4,\n      fontWeight: \"bold\",\n      textShadow: \"0px 0px 5px rgba(0,0,0,0.4)\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, region.type), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flexGrow: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(IconButton, {\n    onClick: () => onDelete(region),\n    tabIndex: -1,\n    style: {\n      width: 22,\n      height: 22\n    },\n    size: \"small\",\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TrashIcon, {\n    style: {\n      marginTop: -8,\n      width: 16,\n      height: 16\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 15\n    }\n  }))), (allowedTags || []).length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: 4\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    onChange: newTags => _onChange(_objectSpread(_objectSpread({}, region), {}, {\n      tags: newTags.map(t => t.value)\n    })),\n    placeholder: \"Tags\",\n    value: (region.tags || []).map(c => ({\n      label: c,\n      value: c\n    })),\n    isMulti: true,\n    options: asMutable(allowedTags.map(c => ({\n      value: c,\n      label: c\n    }))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 15\n    }\n  })), allowComments && /*#__PURE__*/React.createElement(TextField, {\n    InputProps: {\n      className: classes.commentBox\n    },\n    fullWidth: true,\n    multiline: true,\n    rows: 3,\n    ref: commentInputRef,\n    onClick: onCommentInputClick,\n    value: region.comment || \"\",\n    onChange: event => _onChange(_objectSpread(_objectSpread({}, region), {}, {\n      comment: event.target.value\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 15\n    }\n  }), onClose && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: 4,\n      display: \"flex\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flexGrow: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: () => onClose(region),\n    size: \"small\",\n    variant: \"contained\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CheckIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  })))));\n};\nexport default memo(RegionLabel, (prevProps, nextProps) => prevProps.editing === nextProps.editing && prevProps.region === nextProps.region);","map":{"version":3,"sources":["/Users/yan/Documents/proj/ML4GIS/client/src/annotateComponents/RegionLabel/index.js"],"names":["React","useRef","memo","Paper","makeStyles","styles","classnames","IconButton","Button","TrashIcon","CheckIcon","TextField","Select","asMutable","useStyles","RegionLabel","region","editing","allowedTags","onDelete","onChange","onClose","onOpen","allowComments","classes","commentInputRef","onCommentInputClick","_","commentInput","current","children","focus","regionInfo","highlighted","cls","backgroundColor","color","tags","map","t","width","display","flexDirection","padding","paddingLeft","paddingRight","borderRadius","fontWeight","textShadow","type","flexGrow","height","marginTop","length","newTags","value","c","label","className","commentBox","comment","event","target","prevProps","nextProps"],"mappings":"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","sourcesContent":["\nimport React, { useRef, memo } from \"react\"\nimport Paper from \"@material-ui/core/Paper\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport styles from \"./styles\"\nimport classnames from \"classnames\"\nimport type { Region } from \"../ImageCanvas/region-tools.js\"\nimport IconButton from \"@material-ui/core/IconButton\"\nimport Button from \"@material-ui/core/Button\"\nimport TrashIcon from \"@material-ui/icons/Delete\"\nimport CheckIcon from \"@material-ui/icons/Check\"\nimport TextField from \"@material-ui/core/TextField\"\nimport Select from \"react-select\"\nimport { asMutable } from \"seamless-immutable\"\n\nconst useStyles = makeStyles(styles)\n\ntype Props = {\n  region: Region,\n  editing?: boolean,\n  allowedTags?: Array<string>,\n  cls?: string,\n  tags?: Array<string>,\n  onDelete: (Region) => null,\n  onChange: (Region) => null,\n  onClose: (Region) => null,\n  onOpen: (Region) => null,\n  allowComments?: boolean,\n}\n\nexport const RegionLabel = ({\n  region,\n  editing,\n  allowedTags,\n  onDelete,\n  onChange,\n  onClose,\n  onOpen,\n                              allowComments,\n}: Props) => {\n  const classes = useStyles()\n  const commentInputRef = useRef(null)\n  const onCommentInputClick = (_) => {\n    // The TextField wraps the <input> tag with two divs\n    const commentInput = commentInputRef.current.children[0].children[0]\n\n    if (commentInput) return commentInput.focus()\n  }\n  return (\n    <Paper\n      onClick={() => (!editing ? onOpen(region) : null)}\n      className={classnames(classes.regionInfo, {\n        highlighted: region.highlighted,\n      })}\n    >\n      {!editing ? (\n        <div>\n          {region.cls && (\n            <div className=\"name\">\n              <div\n                className=\"circle\"\n                style={{ backgroundColor: region.color }}\n              />\n              {region.cls}\n            </div>\n          )}\n          {region.tags && (\n            <div className=\"tags\">\n              {region.tags.map((t) => (\n                <div key={t} className=\"tag\">\n                  {t}\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      ) : (\n        <div style={{ width: 200 }}>\n          <div style={{ display: \"flex\", flexDirection: \"row\" }}>\n            <div\n              style={{\n                display: \"flex\",\n                backgroundColor: region.color || \"#888\",\n                color: \"#fff\",\n                padding: 4,\n                paddingLeft: 8,\n                paddingRight: 8,\n                borderRadius: 4,\n                fontWeight: \"bold\",\n                textShadow: \"0px 0px 5px rgba(0,0,0,0.4)\",\n              }}\n            >\n              {region.type}\n            </div>\n            <div style={{ flexGrow: 1 }} />\n            <IconButton\n              onClick={() => onDelete(region)}\n              tabIndex={-1}\n              style={{ width: 22, height: 22 }}\n              size=\"small\"\n              variant=\"outlined\"\n            >\n              <TrashIcon style={{ marginTop: -8, width: 16, height: 16 }} />\n            </IconButton>\n          </div>\n          {(allowedTags || []).length > 0 && (\n            <div style={{ marginTop: 4 }}>\n              <Select\n                onChange={(newTags) =>\n                  onChange({\n                    ...(region: any),\n                    tags: newTags.map((t) => t.value),\n                  })\n                }\n                placeholder=\"Tags\"\n                value={(region.tags || []).map((c) => ({ label: c, value: c }))}\n                isMulti\n                options={asMutable(\n                  allowedTags.map((c) => ({ value: c, label: c }))\n                )}\n              />\n            </div>\n          )}\n          {allowComments && (\n              <TextField\n                  InputProps={{\n                    className: classes.commentBox,\n                  }}\n                  fullWidth\n                  multiline\n                  rows={3}\n                  ref={commentInputRef}\n                  onClick={onCommentInputClick}\n                  value={region.comment || \"\"}\n                  onChange={(event) =>\n                      onChange({ ...(region: any), comment: event.target.value })\n                  }\n              />\n          )}\n          {onClose && (\n            <div style={{ marginTop: 4, display: \"flex\" }}>\n              <div style={{ flexGrow: 1 }} />\n              <Button\n                onClick={() => onClose(region)}\n                size=\"small\"\n                variant=\"contained\"\n                color=\"primary\"\n              >\n                <CheckIcon />\n              </Button>\n            </div>\n          )}\n        </div>\n      )}\n    </Paper>\n  )\n}\n\nexport default memo(\n  RegionLabel,\n  (prevProps, nextProps) =>\n    prevProps.editing === nextProps.editing &&\n    prevProps.region === nextProps.region\n)\n"]},"metadata":{},"sourceType":"module"}