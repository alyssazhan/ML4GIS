{"ast":null,"code":"import _objectSpread from\"D:\\\\GitHub\\\\ML4GIS\\\\client\\\\node_modules\\\\react-scripts\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import React,{useRef,memo}from\"react\";import Paper from\"@material-ui/core/Paper\";import{makeStyles}from\"@material-ui/core/styles\";import styles from\"./styles_RegionLabel\";import classnames from\"classnames\";import IconButton from\"@material-ui/core/IconButton\";import Button from\"@material-ui/core/Button\";import TrashIcon from\"@material-ui/icons/Delete\";import CheckIcon from\"@material-ui/icons/Check\";import TextField from\"@material-ui/core/TextField\";import Select from\"react-select\";import{asMutable}from\"seamless-immutable\";// get style from style.js\nvar myStyle=makeStyles(styles);export var RegionLabel=function RegionLabel(_ref){var region=_ref.region,editing=_ref.editing,allowedTags=_ref.allowedTags,onDelete=_ref.onDelete,_onChange=_ref.onChange,onClose=_ref.onClose,onOpen=_ref.onOpen,allowComments=_ref.allowComments;var classes=myStyle();var commentInputRef=useRef(null);var onCommentInputClick=function onCommentInputClick(_){// The TextField wraps the <input> tag with two divs\nvar commentInput=commentInputRef.current.children[0].children[0];if(commentInput)return commentInput.focus();};return/*#__PURE__*/React.createElement(Paper,{onClick:function onClick(){return!editing?onOpen(region):null;},className:classnames(classes.regionInfo,{highlighted:region.highlighted})},!editing?/*#__PURE__*/React.createElement(\"div\",null,region.cls&&/*#__PURE__*/React.createElement(\"div\",{className:\"name\"},/*#__PURE__*/React.createElement(\"div\",{className:\"circle\",style:{backgroundColor:region.color}}),region.cls),region.tags&&/*#__PURE__*/React.createElement(\"div\",{className:\"tags\"},region.tags.map(function(t){return/*#__PURE__*/React.createElement(\"div\",{key:t,className:\"tag\"},t);}))):/*#__PURE__*/React.createElement(\"div\",{style:{width:200}},/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\",flexDirection:\"row\"}},/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\",backgroundColor:region.color||\"#888\",color:\"#fff\",padding:4,paddingLeft:8,paddingRight:8,borderRadius:4,fontWeight:\"bold\",textShadow:\"0px 0px 5px rgba(0,0,0,0.4)\"}},region.type),/*#__PURE__*/React.createElement(\"div\",{style:{flexGrow:1}}),/*#__PURE__*/React.createElement(IconButton,{onClick:function onClick(){return onDelete(region);},tabIndex:-1,style:{width:22,height:22},size:\"small\",variant:\"outlined\"},/*#__PURE__*/React.createElement(TrashIcon,{style:{marginTop:-8,width:16,height:16}}))),(allowedTags||[]).length>0&&/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:4}},/*#__PURE__*/React.createElement(Select,{onChange:function onChange(newTags){return _onChange(_objectSpread(_objectSpread({},region),{},{tags:newTags.map(function(t){return t.value;})}));},placeholder:\"Tags\",value:(region.tags||[]).map(function(c){return{label:c,value:c};}),isMulti:true,options:asMutable(allowedTags.map(function(c){return{value:c,label:c};}))})),allowComments&&/*#__PURE__*/React.createElement(TextField,{InputProps:{className:classes.commentBox},fullWidth:true,multiline:true,rows:3,ref:commentInputRef,onClick:onCommentInputClick,value:region.comment||\"\",onChange:function onChange(event){return _onChange(_objectSpread(_objectSpread({},region),{},{comment:event.target.value}));}}),onClose&&/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:4,display:\"flex\"}},/*#__PURE__*/React.createElement(\"div\",{style:{flexGrow:1}}),/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return onClose(region);},size:\"small\",variant:\"contained\",color:\"primary\"},/*#__PURE__*/React.createElement(CheckIcon,null)))));};export default memo(RegionLabel,function(prevProps,nextProps){return prevProps.editing===nextProps.editing&&prevProps.region===nextProps.region;});","map":{"version":3,"sources":["D:/GitHub/ML4GIS/client/src/pages/Home/annotateComponents/RegionLabel/main_RegionLabel.js"],"names":["React","useRef","memo","Paper","makeStyles","styles","classnames","IconButton","Button","TrashIcon","CheckIcon","TextField","Select","asMutable","myStyle","RegionLabel","region","editing","allowedTags","onDelete","onChange","onClose","onOpen","allowComments","classes","commentInputRef","onCommentInputClick","_","commentInput","current","children","focus","regionInfo","highlighted","cls","backgroundColor","color","tags","map","t","width","display","flexDirection","padding","paddingLeft","paddingRight","borderRadius","fontWeight","textShadow","type","flexGrow","height","marginTop","length","newTags","value","c","label","className","commentBox","comment","event","target","prevProps","nextProps"],"mappings":"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","sourcesContent":["\r\nimport React, { useRef, memo } from \"react\"\r\nimport Paper from \"@material-ui/core/Paper\"\r\nimport { makeStyles } from \"@material-ui/core/styles\"\r\nimport styles from \"./styles_RegionLabel\"\r\nimport classnames from \"classnames\"\r\nimport type { Region } from \"../ImageCanvas/regionTools.js\"\r\nimport IconButton from \"@material-ui/core/IconButton\"\r\nimport Button from \"@material-ui/core/Button\"\r\nimport TrashIcon from \"@material-ui/icons/Delete\"\r\nimport CheckIcon from \"@material-ui/icons/Check\"\r\nimport TextField from \"@material-ui/core/TextField\"\r\nimport Select from \"react-select\"\r\nimport { asMutable } from \"seamless-immutable\"\r\n// get style from style.js\r\nconst myStyle = makeStyles(styles)\r\n\r\ntype Props = {\r\n  region: Region,\r\n  editing?: boolean,\r\n  allowedTags?: Array<string>,\r\n  cls?: string,\r\n  tags?: Array<string>,\r\n  onDelete: (Region) => null,\r\n  onChange: (Region) => null,\r\n  onClose: (Region) => null,\r\n  onOpen: (Region) => null,\r\n  allowComments?: boolean,\r\n}\r\n\r\nexport const RegionLabel = ({\r\n  region,\r\n  editing,\r\n  allowedTags,\r\n  onDelete,\r\n  onChange,\r\n  onClose,\r\n  onOpen,\r\n                              allowComments,\r\n}: Props) => {\r\n  const classes = myStyle()\r\n  const commentInputRef = useRef(null)\r\n  const onCommentInputClick = (_) => {\r\n    // The TextField wraps the <input> tag with two divs\r\n    const commentInput = commentInputRef.current.children[0].children[0]\r\n\r\n    if (commentInput) return commentInput.focus()\r\n  }\r\n  return (\r\n    <Paper\r\n      onClick={() => (!editing ? onOpen(region) : null)}\r\n      className={classnames(classes.regionInfo, {\r\n        highlighted: region.highlighted,\r\n      })}\r\n    >\r\n      {!editing ? (\r\n        <div>\r\n          {region.cls && (\r\n            <div className=\"name\">\r\n              <div\r\n                className=\"circle\"\r\n                style={{ backgroundColor: region.color }}\r\n              />\r\n              {region.cls}\r\n            </div>\r\n          )}\r\n          {region.tags && (\r\n            <div className=\"tags\">\r\n              {region.tags.map((t) => (\r\n                <div key={t} className=\"tag\">\r\n                  {t}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      ) : (\r\n        <div style={{ width: 200 }}>\r\n          <div style={{ display: \"flex\", flexDirection: \"row\" }}>\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                backgroundColor: region.color || \"#888\",\r\n                color: \"#fff\",\r\n                padding: 4,\r\n                paddingLeft: 8,\r\n                paddingRight: 8,\r\n                borderRadius: 4,\r\n                fontWeight: \"bold\",\r\n                textShadow: \"0px 0px 5px rgba(0,0,0,0.4)\",\r\n              }}\r\n            >\r\n              {region.type}\r\n            </div>\r\n            <div style={{ flexGrow: 1 }} />\r\n            <IconButton\r\n              onClick={() => onDelete(region)}\r\n              tabIndex={-1}\r\n              style={{ width: 22, height: 22 }}\r\n              size=\"small\"\r\n              variant=\"outlined\"\r\n            >\r\n              <TrashIcon style={{ marginTop: -8, width: 16, height: 16 }} />\r\n            </IconButton>\r\n          </div>\r\n          {(allowedTags || []).length > 0 && (\r\n            <div style={{ marginTop: 4 }}>\r\n              <Select\r\n                onChange={(newTags) =>\r\n                  onChange({\r\n                    ...(region: any),\r\n                    tags: newTags.map((t) => t.value),\r\n                  })\r\n                }\r\n                placeholder=\"Tags\"\r\n                value={(region.tags || []).map((c) => ({ label: c, value: c }))}\r\n                isMulti\r\n                options={asMutable(\r\n                  allowedTags.map((c) => ({ value: c, label: c }))\r\n                )}\r\n              />\r\n            </div>\r\n          )}\r\n          {allowComments && (\r\n              <TextField\r\n                  InputProps={{\r\n                    className: classes.commentBox,\r\n                  }}\r\n                  fullWidth\r\n                  multiline\r\n                  rows={3}\r\n                  ref={commentInputRef}\r\n                  onClick={onCommentInputClick}\r\n                  value={region.comment || \"\"}\r\n                  onChange={(event) =>\r\n                      onChange({ ...(region: any), comment: event.target.value })\r\n                  }\r\n              />\r\n          )}\r\n          {onClose && (\r\n            <div style={{ marginTop: 4, display: \"flex\" }}>\r\n              <div style={{ flexGrow: 1 }} />\r\n              <Button\r\n                onClick={() => onClose(region)}\r\n                size=\"small\"\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n              >\r\n                <CheckIcon />\r\n              </Button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </Paper>\r\n  )\r\n}\r\n\r\nexport default memo(\r\n  RegionLabel,\r\n  (prevProps, nextProps) =>\r\n    prevProps.editing === nextProps.editing &&\r\n    prevProps.region === nextProps.region\r\n)\r\n"]},"metadata":{},"sourceType":"module"}